{"version":3,"sources":["pnp-provisioning.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","$pnp","Provisioning","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","factory","v","undefined","util_1","Dictionary","keys","values","prototype","get","key","index","indexOf","add","push","merge","source","Util","isFunction","sourceAsDictionary","getKeys","sourceAsHash","hasOwnProperty","remove","val","splice","getValues","clear","count","../utils/util","2","fetchClient_1","digestCache_1","HttpClient","_impl","FetchClient","_digestCache","DigestCache","fetch","url","options","opts","extend","cache","credentials","headers","Headers","temp","Request","forEach","value","name","append","has","method","toUpperCase","webUrl","substr","getDigest","then","digest","fetchRaw","_this","retry","ctx","response","resolve","delay","status","reject","attempts","retryCount","setTimeout","getCtxCallback","Promise","retryContext","post","./digestCache","./fetchClient","3","collections_1","CachedDigest","_httpClient","_digests","cachedDigest","now","Date","expiration","combinePaths","Accept","Content-type","json","data","newCachedDigest","FormDigestValue","seconds","FormDigestTimeoutSeconds","setTime","getTime","../collections/collections","4","5","__extends","d","b","__","constructor","p","Object","create","ObjectHandlerBase_1","ObjectComposedLook","_super","ProvisionObjects","object","scope_started","clientContext","SP","ClientContext","get_current","web","get_web","colorPaletteUrl","ColorPaletteUrl","replaceUrlTokens","fontSchemeUrl","FontSchemeUrl","backgroundImageUrl","BackgroundImageUrl","applyTheme","getRelativeUrl","update","executeQueryAsync","scope_ended","ObjectHandlerBase","../util","./ObjectHandlerBase","6","ObjectCustomActions","customactions","userCustomActions","get_userCustomActions","load","obj","objExists","get_data","filter","userCustomAction","get_title","Title","objCreationInformation","Description","set_description","CommandUIExtension","set_commandUIExtension","Group","set_group","set_title","Url","set_url","ScriptBlock","set_scriptBlock","ScriptSrc","set_scriptSrc","Location","set_location","ImageUrl","set_imageUrl","Name","set_name","RegistrationId","set_registrationId","RegistrationType","set_registrationType","Rights","set_rights","Sequence","set_sequence","7","ObjectFeatures","features","webFeatures","get_features","Deactivate","Guid","ID","FeatureDefinitionScope","none","8","CoreUtil","ObjectFiles","objects","fileInfos","promises","httpClient","Src","text","all","responses","filename","GetFilenameFromFilePath","Dest","webServerRelativeUrl","_spPageContextInfo","folder","getFolderByServerRelativeUrl","GetFolderFromFilePath","fi","Contents","Filename","Folder","Instance","Overwrite","Properties","RemoveExistingWebParts","ServerRelativeUrl","Views","WebParts","FileCreationInformation","set_overwrite","set_content","Base64EncodedByteArray","get_content","charCodeAt","get_files","ApplyFileProperties","AddWebPartsToWebPartPage","ModifyHiddenViews","error","RemoveWebPartsFromFileIfSpecified","limitedWebPartManager","shouldRemoveExisting","existingWebParts","get_webParts","wp","deleteWebPart","GetWebPartXml","webParts","FileUrl","fileUrl","res","rej","Xml","dest","src","fileServerRelativeUrl","file","getFileByServerRelativeUrl","getLimitedWebPartManager","PersonalizationScope","shared","webPartsWithXml","oWebPartDefinition","importWebPart","oWebPart","get_webPart","addWebPart","Zone","Order","fileProperties","listItemAllFields","get_listItemAllFields","set_item","GetViewFromCollectionByUrl","viewCollection","serverRelativeUrl","viewCollectionEnumerator","getEnumerator","moveNext","view","get_serverRelativeUrl","toString","toLowerCase","mapping","lists","listViewCollections","List","get_lists","getByTitle","get_views","views","list","Paged","set_paged","Query","set_viewQuery","RowLimit","set_rowLimit","ViewFields","columns_1","get_viewFields","removeAll","vf","filePath","split","join","../../../utils/util","9","HttpClient_1","logging_1","parameters","Logger","write","../../../net/HttpClient","../../../utils/logging","10","Sequencer_1","ObjectLists","listInstances","existingObj","EnableVersioning","set_enableVersioning","EnableMinorVersions","set_enableMinorVersions","EnableModeration","set_enableModeration","EnableFolderCreation","set_enableFolderCreation","EnableAttachments","set_enableAttachments","NoCrawl","set_noCrawl","DefaultDisplayFormUrl","set_defaultDisplayFormUrl","DefaultEditFormUrl","set_defaultEditFormUrl","DefaultNewFormUrl","set_defaultNewFormUrl","DraftVersionVisibility","set_draftVersionVisibility","DraftVisibilityType","Hidden","set_hidden","ForceCheckout","set_forceCheckout","ListCreationInformation","OnQuickLaunch","QuickLaunchOptions","on","off","set_quickLaunchOption","TemplateType","set_templateType","createdList","toLocaleLowerCase","sequencer","Sequencer","ApplyContentTypeBindings","ApplyListInstanceFieldRefs","ApplyFields","ApplyLookupFields","ApplyListSecurity","CreateViews","InsertDataRows","CreateFolders","ListInstances","Objects","execute","EnsureLocationBasedMetadataDefaultsReceiver","eventReceivers","get_eventReceivers","eventRecCreationInfo","EventReceiverDefinitionCreationInformation","set_receiverName","set_synchronization","set_sequenceNumber","set_receiverAssembly","set_receiverClass","set_eventType","EventReceiverType","itemAdded","params","Folders","folderServerRelativeUrl","rootFolder","get_rootFolder","metadataDefaults","setMetadataDefaults","folderUrl","get_folders","DefaultValues","metadataDefaultsFileCreateInfo","webCts","get_site","get_rootWeb","get_contentTypes","listCts","ContentTypeBindings","set_contentTypesEnabled","listContentTypes","existingContentTypes","Array","RemoveExistingContentTypes","ct","ctb","addExistingContentType","getById","ContentTypeId","j","ect","deleteObject","siteFields","get_fields","FieldRefs","fr","field","getByInternalNameOrTitle","Fields","fieldXml","GetFieldXml","fieldType","GetFieldXmlAttr","addFieldAsXml","AddFieldOptions","addToAllContentTypes","attr","regex","RegExp","match","exec","SchemaXml","properties_1","prop","targetList","get_id","Type","Formula","Security","BreakRoleInheritance","breakRoleInheritance","CopyRoleAssignments","ClearSubscopes","get_roleAssignments","allProperties","get_allProperties","siteGroups","get_siteGroups","roleDefinitions","get_roleDefinitions","RoleAssignments","ra","roleDef","RoleDefinition","getByName","roleBindings","RoleDefinitionBindingCollection","newObject","principal","Principal","token","substring","groupId","get_fieldValues","viewExists","ev","RemoveExistingViews","Scope","set_scope","viewCreationInformation","ViewCreationInformation","PersonalView","set_personalView","set_query","SetAsDefaultView","set_setAsDefaultView","set_viewFields","ViewTypeKind","set_viewTypeKind","ViewType","html","DataRows","item","addItem","ListItemCreationInformation","../Sequencer/Sequencer","11","ObjectNavigation","navigation","get_navigation","ConfigureQuickLaunch","QuickLaunch","getNodeFromCollectionByTitle","nodeCollection","title","nodes","quickLaunchNodeCollection_1","get_quickLaunch","temporaryQuickLaunch","get_count","oldNode","itemAt","existingNode","newNode","NavigationNodeCreationInformation","get_url","set_asLastNode","webAbsoluteUrl","node","getNodeById","Id","childrenNodeCollection","get_children","parentNode","Children","12","ObjectPropertyBagEntries","entries","clientContext_1","web_1","propBag_1","indexedProperties_1","entry","Key","Value","Indexed","encodePropertyKey","13","ObjectWebSettings","WelcomePage","set_welcomePage","MasterUrl","set_masterUrl","CustomMasterUrl","set_customMasterUrl","SaveSiteAsTemplateEnabled","set_saveSiteAsTemplateEnabled","QuickLaunchEnabled","TreeViewEnabled","set_treeViewEnabled","14","ProvisioningStep","handler","dependentPromise","_handler","15","functions","parameter","scope","progressFunction","promiseSequence","sequenceFunction","functionNr","result","16","ProvisioningStep_1","ObjectNavigation_1","ObjectPropertyBagEntries_1","ObjectFeatures_1","ObjectWebSettings_1","ObjectComposedLook_1","ObjectCustomActions_1","ObjectFiles_1","ObjectLists_1","handlers","Navigation","PropertyBagEntries","Features","WebSettings","ComposedLook","CustomActions","Files","Lists","applyTemplate","path","ok","template","start","statusText","LogLevel","queue","startTime","queueItems","q","Parameters","Info","JSON","stringify","../../net/HttpClient","../../utils/logging","./ObjectHandlers/ObjectComposedLook","./ObjectHandlers/ObjectCustomActions","./ObjectHandlers/ObjectFeatures","./ObjectHandlers/ObjectFiles","./ObjectHandlers/ObjectLists","./ObjectHandlers/ObjectNavigation","./ObjectHandlers/ObjectPropertyBagEntries","./ObjectHandlers/ObjectWebSettings","./ProvisioningStep","./util","17","replace","document","location","protocol","hostname","siteAbsoluteUrl","propKey","bytes","b64encoded","btoa","String","fromCharCode","apply","18","defineProperty","instance","activeLogLevel","set","enumerable","configurable","_instance","LoggerImpl","subscribe","listeners","_i","arguments","clearSubscribers","message","level","Verbose","log","measure","subscribers","Warning","listener","slice","console","profile","profileEnd","ConsoleListener","msg","format","warn","AzureInsightsListener","azureInsightsInstrumentationKey","appInsights","config","createElement","getElementsByTagName","appendChild","cookie","pop","disableExceptionTracking","instrumentationKey","ai","trackException","trackEvent","FunctionListener","19","context","urlParamExists","test","search","getUrlParamByName","results","decodeURIComponent","getUrlParamBoolByName","isFalse","stringInsert","target","dateAdd","date","interval","units","ret","toLocaleString","setFullYear","getFullYear","setMonth","getMonth","setDate","getDate","loadStylesheet","avoidCache","encodeURIComponent","head","setAttribute","paths","parts","getRandomString","chars","possible","charAt","Math","floor","random","getGUID","guid","c","candidateFunction","isArray","array","stringIsNullOrEmpty","noOverwrite","id","check","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","isUrlAbsolute"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,CALA,SAAUA,GAAG,GAAoB,gBAAVC,UAAoC,mBAATC,QAAsBA,OAAOD,QAAQD,QAAS,IAAmB,kBAATG,SAAqBA,OAAOC,IAAKD,UAAUH,OAAO,CAAC,GAAIK,EAAkCA,GAAb,mBAATC,QAAwBA,OAA+B,mBAATC,QAAwBA,OAA6B,mBAAPC,MAAsBA,KAAYC,MAAMJ,EAAEK,OAASL,EAAEK,UAAYC,aAAeX,MAAO,WAAW,GAAIG,EAAsB,OAAO,SAAUS,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIjB,GAAE,GAAIsB,OAAM,uBAAuBL,EAAE,IAAK,MAAMjB,GAAEuB,KAAK,mBAAmBvB,EAAE,GAAIwB,GAAEV,EAAEG,IAAIhB,WAAYY,GAAEI,GAAG,GAAGQ,KAAKD,EAAEvB,QAAQ,SAASW,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIY,EAAEA,EAAEvB,QAAQW,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGhB,QAAkD,IAAI,GAA1CoB,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQlB,EAAOD,IACn2B,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,iBAAkByB,IAErD,SAAUR,EAASnB,GAClB,YACA,IAAI8B,GAASX,EAAQ,iBACjBY,EAAc,WACd,QAASA,KACLvB,KAAKwB,QACLxB,KAAKyB,UA4DT,MA1DAF,GAAWG,UAAUC,IAAM,SAAUC,GACjC,GAAIC,GAAQ7B,KAAKwB,KAAKM,QAAQF,EAC9B,OAAY,GAARC,EACO,KAEJ7B,KAAKyB,OAAOI,IAEvBN,EAAWG,UAAUK,IAAM,SAAUH,EAAKpB,GACtC,GAAIqB,GAAQ7B,KAAKwB,KAAKM,QAAQF,EAC1BC,GAAQ,GACR7B,KAAKyB,OAAOI,GAASrB,GAGrBR,KAAKwB,KAAKQ,KAAKJ,GACf5B,KAAKyB,OAAOO,KAAKxB,KAGzBe,EAAWG,UAAUO,MAAQ,SAAUC,GACnC,GAAIZ,EAAOa,KAAKC,WAAWF,EAAgB,SAIvC,IAAK,GAHDG,GAAqBH,EACrBV,EAAOa,EAAmBC,UAC1BvB,EAAIS,EAAKP,OACJL,EAAI,EAAOG,EAAJH,EAAOA,IACnBZ,KAAK+B,IAAIP,EAAKZ,GAAIyB,EAAmBV,IAAIH,EAAKZ,SAGjD,CACD,GAAI2B,GAAeL,CACnB,KAAK,GAAIN,KAAOW,GACRA,EAAaC,eAAeZ,IAC5B5B,KAAK+B,IAAIH,EAAKM,EAAON,MAKrCL,EAAWG,UAAUe,OAAS,SAAUb,GACpC,GAAIC,GAAQ7B,KAAKwB,KAAKM,QAAQF,EAC9B,IAAY,EAARC,EACA,MAAO,KAEX,IAAIa,GAAM1C,KAAKyB,OAAOI,EAGtB,OAFA7B,MAAKwB,KAAKmB,OAAOd,EAAO,GACxB7B,KAAKyB,OAAOkB,OAAOd,EAAO,GACnBa,GAEXnB,EAAWG,UAAUY,QAAU,WAC3B,MAAOtC,MAAKwB,MAEhBD,EAAWG,UAAUkB,UAAY,WAC7B,MAAO5C,MAAKyB,QAEhBF,EAAWG,UAAUmB,MAAQ,WACzB7C,KAAKwB,QACLxB,KAAKyB,WAETF,EAAWG,UAAUoB,MAAQ,WACzB,MAAO9C,MAAKwB,KAAKP,QAEdM,IAEX/B,GAAQ+B,WAAaA,MAGtBwB,gBAAgB,KAAKC,GAAG,SAASrC,EAAQlB,EAAOD,IACnD,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,gBAAiB,gBAAiB,iBAAkByB,IAEvF,SAAUR,EAASnB,GAClB,YACA,IAAIyD,GAAgBtC,EAAQ,iBACxBuC,EAAgBvC,EAAQ,iBACxBW,EAASX,EAAQ,iBACjBwC,EAAc,WACd,QAASA,GAAWC,GACF,SAAVA,IAAoBA,EAAQ,GAAIH,GAAcI,aAClDrD,KAAKoD,MAAQA,EACbpD,KAAKsD,aAAe,GAAIJ,GAAcK,YAAYvD,MA6EtD,MA3EAmD,GAAWzB,UAAU8B,MAAQ,SAAUC,EAAKC,GACxB,SAAZA,IAAsBA,KAC1B,IAAI3D,GAAOC,KACP2D,EAAOrC,EAAOa,KAAKyB,OAAOF,GAAWG,MAAO,WAAYC,YAAa,gBAAiB,GACtFC,EAAU,GAAIC,QAClB,IAA+B,mBAApBN,GAAQK,QAAyB,CACxC,GAAIE,GAAO,GAAIC,SAAQ,IAAMH,QAASL,EAAQK,SAC9CE,GAAKF,QAAQI,QAAQ,SAAUC,EAAOC,GAClCN,EAAQO,OAAOD,EAAMD,KAa7B,GAVKL,EAAQQ,IAAI,WACbR,EAAQO,OAAO,SAAU,oBAExBP,EAAQQ,IAAI,iBACbR,EAAQO,OAAO,eAAgB,gDAE9BP,EAAQQ,IAAI,8BACbR,EAAQO,OAAO,4BAA6B,iCAEhDX,EAAOrC,EAAOa,KAAKyB,OAAOD,GAAQI,QAASA,IACvCJ,EAAKa,QAAwC,QAA9Bb,EAAKa,OAAOC,gBACtBV,EAAQQ,IAAI,mBAAoB,CACjC,GAAI1C,GAAQ4B,EAAI3B,QAAQ,SACxB,IAAY,EAARD,EACA,KAAM,IAAIhB,OAAM,8BAEpB,IAAI6D,GAASjB,EAAIkB,OAAO,EAAG9C,EAC3B,OAAO7B,MAAKsD,aAAasB,UAAUF,GAC9BG,KAAK,SAAUC,GAEhB,MADAf,GAAQO,OAAO,kBAAmBQ,GAC3B/E,EAAKgF,SAAStB,EAAKE,KAItC,MAAO5D,GAAKgF,SAAStB,EAAKE,IAE9BR,EAAWzB,UAAUqD,SAAW,SAAUtB,EAAKC,GAC3C,GAAIsB,GAAQhF,IACI,UAAZ0D,IAAsBA,KAC1B,IAAIuB,GAAQ,SAAUC,GAClBF,EAAM5B,MAAMI,MAAMC,EAAKC,GAASmB,KAAK,SAAUM,GAAY,MAAOD,GAAIE,QAAQD,KAA9EH,SAAkG,SAAUG,GACxG,GAAIE,GAAQH,EAAIG,KACQ,OAApBF,EAASG,QAAsC,MAApBH,EAASG,QACpCJ,EAAIK,OAAOJ,GAEfD,EAAIG,OAAS,EACbH,EAAIM,WACAN,EAAIO,YAAcP,EAAIM,UACtBN,EAAIK,OAAOJ,GAEfO,WAAWpE,EAAOa,KAAKwD,eAAeX,EAAOC,EAAOC,GAAMG,KAGlE,OAAO,IAAIO,SAAQ,SAAUR,EAASG,GAClC,GAAIM,IACAL,SAAU,EACVH,MAAO,IACPE,OAAQA,EACRH,QAASA,EACTK,WAAY,EAEhBR,GAAMjE,KAAKgE,EAAOa,MAG1B1C,EAAWzB,UAAUC,IAAM,SAAU8B,EAAKC,GACtB,SAAZA,IAAsBA,KAC1B,IAAIC,GAAOrC,EAAOa,KAAKyB,OAAOF,GAAWc,OAAQ,OACjD,OAAOxE,MAAKwD,MAAMC,EAAKE,IAE3BR,EAAWzB,UAAUoE,KAAO,SAAUrC,EAAKC,GACvB,SAAZA,IAAsBA,KAC1B,IAAIC,GAAOrC,EAAOa,KAAKyB,OAAOF,GAAWc,OAAQ,QACjD,OAAOxE,MAAKwD,MAAMC,EAAKE,IAEpBR,IAEX3D,GAAQ2D,WAAaA,MAGtBJ,gBAAgB,GAAGgD,gBAAgB,EAAEC,gBAAgB,IAAIC,GAAG,SAAStF,EAAQlB,EAAOD,IACvF,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,6BAA8B,iBAAkByB,IAEnF,SAAUR,EAASnB,GAClB,YACA,IAAI0G,GAAgBvF,EAAQ,8BACxBW,EAASX,EAAQ,iBACjBwF,EAAgB,WAChB,QAASA,MAET,MAAOA,KAEX3G,GAAQ2G,aAAeA,CACvB,IAAI5C,GAAe,WACf,QAASA,GAAY6C,EAAaC,GACb,SAAbA,IAAuBA,EAAW,GAAIH,GAAc3E,YACxDvB,KAAKoG,YAAcA,EACnBpG,KAAKqG,SAAWA,EAoCpB,MAlCA9C,GAAY7B,UAAUkD,UAAY,SAAUF,GACxC,GAAI3E,GAAOC,KACPsG,EAAetG,KAAKqG,SAAS1E,IAAI+C,EACrC,IAAqB,OAAjB4B,EAAuB,CACvB,GAAIC,GAAM,GAAIC,KACd,IAAID,EAAMD,EAAaG,WACnB,MAAOb,SAAQR,QAAQkB,EAAalC,OAG5C,GAAIX,GAAMnC,EAAOa,KAAKuE,aAAahC,EAAQ,oBAC3C,OAAO3E,GAAKqG,YAAYrB,SAAStB,GAC7BI,MAAO,WACPC,YAAa,cACbC,SACI4C,OAAU,mBACVC,eAAgB,gDAEpBpC,OAAQ,SACTK,KAAK,SAAUM,GACd,MAAOA,GAAS0B,SACjBhC,KAAK,SAAUiC,GACd,GAAIC,GAAkB,GAAIZ,EAC1BY,GAAgB3C,MAAQ0C,EAAKE,eAC7B,IAAIC,GAAUH,EAAKI,yBACfT,EAAa,GAAID,KAIrB,OAHAC,GAAWU,QAAQV,EAAWW,UAAY,IAAOH,GACjDF,EAAgBN,WAAaA,EAC7B1G,EAAKsG,SAAStE,IAAI2C,EAAQqC,GACnBA,EAAgB3C,SAG/Bb,EAAY7B,UAAUmB,MAAQ,WAC1B7C,KAAKqG,SAASxD,SAEXU,IAEX/D,GAAQ+D,YAAcA,MAGvB8D,6BAA6B,EAAEtE,gBAAgB,KAAKuE,GAAG,SAAS3G,EAAQlB,EAAOD,IAClF,SAAWM,IACX,SAAWqB,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB,YACA,IAAI6D,GAAe,WACf,QAASA,MAKT,MAHAA,GAAY3B,UAAU8B,MAAQ,SAAUC,EAAKC,GACzC,MAAO5D,GAAO0D,MAAMC,EAAKC,IAEtBL,IAEX7D,GAAQ6D,YAAcA,MAGvBrC,KAAKhB,KAAuB,mBAAXF,QAAyBA,OAAyB,mBAATC,MAAuBA,KAAyB,mBAAXF,QAAyBA,gBACrH0H,GAAG,SAAS5G,EAAQlB,EAAOD,GACjC,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,UAAW,uBAAwByB,IAEtE,SAAUR,EAASnB,GAClB,YACA,IAAI8B,GAASX,EAAQ,WACjBqH,EAAsBrH,EAAQ,uBAC9BsH,EAAsB,SAAUC,GAEhC,QAASD,KACLC,EAAOlH,KAAKhB,KAAM,gBAsBtB,MAxBAwH,GAAUS,EAAoBC,GAI9BD,EAAmBvG,UAAUyG,iBAAmB,SAAUC,GACtD,GAAIpD,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpBC,EAAkBR,EAAOS,gBAAkBvH,EAAOa,KAAK2G,iBAAiBV,EAAOS,iBAAmB,GAClGE,EAAgBX,EAAOY,cAAgB1H,EAAOa,KAAK2G,iBAAiBV,EAAOY,eAAiB,GAC5FC,EAAqBb,EAAOc,mBAAqB5H,EAAOa,KAAK2G,iBAAiBV,EAAOc,oBAAsB,IAC/GR,GAAIS,WAAW7H,EAAOa,KAAKiH,eAAeR,GAAkBtH,EAAOa,KAAKiH,eAAeL,GAAgBE,GAAoB,GAC3HP,EAAIW,SACJf,EAAcgB,kBAAkB,WAC5BpB,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,SAIL6C,GACTD,EAAoBwB,kBACtBhK,GAAQyI,mBAAqBA,MAG9BwB,UAAU,GAAGC,sBAAsB,IAAIC,GAAG,SAAShJ,EAAQlB,EAAOD,GACrE,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,uBAAwByB,IAE3D,SAAUR,EAASnB,GAClB,YACA,IAAIwI,GAAsBrH,EAAQ,uBAC9BiJ,EAAuB,SAAU1B,GAEjC,QAAS0B,KACL1B,EAAOlH,KAAKhB,KAAM,iBA0EtB,MA5EAwH,GAAUoC,EAAqB1B,GAI/B0B,EAAoBlI,UAAUyG,iBAAmB,SAAU0B,GACvD,GAAI7E,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCqB,EAAoBxB,EAAcK,UAAUoB,uBAChDzB,GAAc0B,KAAKF,GACnBxB,EAAcgB,kBAAkB,WAC5BO,EAAc1F,QAAQ,SAAU8F,GAC5B,GAAIC,GAAYJ,EAAkBK,WAAWC,OAAO,SAAUC,GAC1D,MAAOA,GAAiBC,cAAgBL,EAAIM,QAC7CtJ,OAAS,CACZ,KAAKiJ,EAAW,CACZ,GAAIM,GAAyBV,EAAkB/H,KAC3CkI,GAAIQ,aACJD,EAAuBE,gBAAgBT,EAAIQ,aAE3CR,EAAIU,oBACJH,EAAuBI,uBAAuBX,EAAIU,oBAElDV,EAAIY,OACJL,EAAuBM,UAAUb,EAAIY,OAErCZ,EAAIM,OACJC,EAAuBO,UAAUd,EAAIM,OAErCN,EAAIe,KACJR,EAAuBS,QAAQhB,EAAIe,KAEnCf,EAAIiB,aACJV,EAAuBW,gBAAgBlB,EAAIiB,aAE3CjB,EAAImB,WACJZ,EAAuBa,cAAcpB,EAAImB,WAEzCnB,EAAIqB,UACJd,EAAuBe,aAAatB,EAAIqB,UAExCrB,EAAIuB,UACJhB,EAAuBiB,aAAaxB,EAAIuB,UAExCvB,EAAIyB,MACJlB,EAAuBmB,SAAS1B,EAAIyB,MAEpCzB,EAAI2B,gBACJpB,EAAuBqB,mBAAmB5B,EAAI2B,gBAE9C3B,EAAI6B,kBACJtB,EAAuBuB,qBAAqB9B,EAAI6B,kBAEhD7B,EAAI+B,QACJxB,EAAuByB,WAAWhC,EAAI+B,QAEtC/B,EAAIiC,UACJ1B,EAAuB2B,aAAalC,EAAIiC,UAE5C1B,EAAuBnB,YAG/Bf,EAAcgB,kBAAkB,WAC5BpB,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,OAEL,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,SAILwE,GACT5B,EAAoBwB,kBACtBhK,GAAQoK,oBAAsBA,MAG/BF,sBAAsB,IAAI0C,GAAG,SAASzL,EAAQlB,EAAOD,GACxD,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,uBAAwByB,IAE3D,SAAUR,EAASnB,GAClB,YACA,IAAIwI,GAAsBrH,EAAQ,uBAC9B0L,EAAkB,SAAUnE,GAE5B,QAASmE,KACLnE,EAAOlH,KAAKhB,KAAM,YA4BtB,MA9BAwH,GAAU6E,EAAgBnE,GAI1BmE,EAAe3K,UAAUyG,iBAAmB,SAAUmE,GAClD,GAAItH,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpB4D,EAAc7D,EAAI8D,cACtBF,GAASnI,QAAQ,SAAU5E,GACnBA,EAAEkN,cAAe,EACjBF,EAAY9J,OAAO,GAAI8F,IAAGmE,KAAKnN,EAAEoN,KAAK,GAGtCJ,EAAYxK,IAAI,GAAIwG,IAAGmE,KAAKnN,EAAEoN,KAAK,EAAMpE,GAAGqE,uBAAuBC,QAG3EnE,EAAIW,SACJf,EAAc0B,KAAKuC,GACnBjE,EAAcgB,kBAAkB,WAC5BpB,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,SAILiH,GACTrE,EAAoBwB,kBACtBhK,GAAQ6M,eAAiBA,MAG1B3C,sBAAsB,IAAIoD,GAAG,SAASnM,EAAQlB,EAAOD,GACxD,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,sBAAuB,UAAW,uBAAwByB,IAE7F,SAAUR,EAASnB,GAClB,YACA,IAAIuN,GAAWpM,EAAQ,uBACnBW,EAASX,EAAQ,WACjBqH,EAAsBrH,EAAQ,uBAC9BqM,EAAe,SAAU9E,GAEzB,QAAS8E,KACL9E,EAAOlH,KAAKhB,KAAM,SA8OtB,MAhPAwH,GAAUwF,EAAa9E,GAIvB8E,EAAYtL,UAAUyG,iBAAmB,SAAU8E,GAC/C,GAAIjI,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpBuE,KACAC,IACJF,GAAQ9I,QAAQ,SAAU8F,EAAKpI,GAC3BsL,EAASnL,KAAKgD,EAAMoI,WAAWrI,SAASzD,EAAOa,KAAK2G,iBAAiBmB,EAAIoD,MAAMxI,KAAK,SAAUM,GAC1F,MAAOA,GAASmI,YAGxB1H,QAAQ2H,IAAIJ,GAAUtI,KAAK,SAAU2I,GACjCA,EAAUrJ,QAAQ,SAAUgB,EAAUtD,GAClC,GAAIoI,GAAMgD,EAAQpL,GACd4L,EAAWzI,EAAM0I,wBAAwBzD,EAAI0D,MAC7CC,EAAuBC,mBAAmBD,qBAC1CE,EAASpF,EAAIqF,6BAA6BH,EAAuB,IAAM5I,EAAMgJ,sBAAsB/D,EAAI0D,OACvGM,GACAC,SAAU/I,EACVwI,KAAM1D,EAAI0D,KACVQ,SAAUV,EACVW,OAAQN,EACRO,SAAU,KACVC,WAAW,EACXC,cACAC,wBAAwB,EACxBC,kBAAmBxE,EAAI0D,KACvBN,IAAKpD,EAAIoD,IACTqB,SACAC,YAGJ,IADA5B,EAAS5K,KAAKyB,OAAOqK,EAAIhE,GACgB,KAArCgE,EAAGE,SAASrM,QAAQ,aAAxB,CAGA,GAAI0I,GAAyB,GAAIjC,IAAGqG,uBACpCpE,GAAuBqE,cAAcZ,EAAGK,WACxC9D,EAAuBS,QAAQgD,EAAGE,UAClC3D,EAAuBsE,YAAY,GAAIvG,IAAGwG,uBAC1C,KAAK,GAAInO,GAAI,EAAGA,EAAIqN,EAAGC,SAASjN,OAAQL,IACpC4J,EAAuBwE,cAAc1K,OAAO2J,EAAGC,SAASe,WAAWrO,GAEvE0H,GAAc0B,KAAKiE,EAAGG,OAAOc,YAAYnN,IAAIyI,IAC7C0C,EAAUlL,KAAKiM,QAGvB3F,EAAcgB,kBAAkB,WAC5B6D,KACAD,EAAU/I,QAAQ,SAAU8J,GACpBA,EAAGM,YAAczG,OAAOtG,KAAKyM,EAAGM,YAAYtN,OAAS,GACrDkM,EAASnL,KAAKgD,EAAMmK,oBAAoBlB,EAAGN,KAAMM,EAAGM,aAEpDN,EAAGU,UAAYV,EAAGU,SAAS1N,OAAS,GACpCkM,EAASnL,KAAKgD,EAAMoK,yBAAyBnB,EAAGN,KAAMM,EAAGZ,IAAKY,EAAGU,SAAUV,EAAGO,2BAGtF5I,QAAQ2H,IAAIJ,GAAUtI,KAAK,WACvBG,EAAMqK,kBAAkBpC,GAASpI,KAAK,SAAUT,GAC5C8D,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,EAAQhB,IACT,SAAUkL,GACTpH,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCO,EAAO+J,QAGhB,SAAUA,GACTpH,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCO,EAAO+J,QAInBtC,EAAYtL,UAAU6N,kCAAoC,SAAUjH,EAAekH,EAAuBC,GACtG,MAAO,IAAI7J,SAAQ,SAAUR,EAASG,GAC7BkK,GACDrK,GAEJ,IAAIsK,GAAmBF,EAAsBG,cAC7CrH,GAAc0B,KAAK0F,GACnBpH,EAAcgB,kBAAkB,WAC5BoG,EAAiBvF,WAAWhG,QAAQ,SAAUyL,GAC1CA,EAAGC,kBAEPvH,EAAc0B,KAAK0F,GACnBpH,EAAcgB,kBAAkBlE,EAASG,IAC1CA,MAGXyH,EAAYtL,UAAUoO,cAAgB,SAAUC,GAC5C,GAAI/K,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI4H,KACJ4C,GAAS5L,QAAQ,SAAUyL,EAAI/N,GAC3B,GAAI+N,EAAG1B,SAAS8B,QAAS,CACrB,GAAIC,GAAU3O,EAAOa,KAAK2G,iBAAiB8G,EAAG1B,SAAS8B,QACvD7C,GAASnL,KAAKgD,EAAMoI,WAAWrI,SAASkL,GAASpL,KAAK,SAAUM,GAC5D,MAAOA,GAASmI,cAIpBH,GAASnL,KAAK,WACV,MAAO,IAAI4D,SAAQ,SAAUsK,EAAKC,GAC9BD,YAKhBtK,QAAQ2H,IAAIJ,GAAUtI,KAAK,SAAU2I,GACjCA,EAAUrJ,QAAQ,SAAUgB,EAAUtD,GAClC,GAAI+N,GAAKG,EAASlO,EACP,QAAP+N,GAAezK,GAAYA,EAASlE,OAAS,IAC7C2O,EAAG1B,SAASkC,IAAMjL,KAG1BC,EAAQ2K,QAIpB/C,EAAYtL,UAAU0N,yBAA2B,SAAUiB,EAAMC,EAAKP,EAAUN,GAC5E,GAAIzK,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpB4H,EAAwB1C,mBAAmBD,qBAAuB,IAAMyC,EACxEG,EAAO9H,EAAI+H,2BAA2BF,EAC1CjI,GAAc0B,KAAKwG,GACnBlI,EAAcgB,kBAAkB,WAC5B,GAAIkG,GAAwBgB,EAAKE,yBAAyBnI,GAAGoG,SAASgC,qBAAqBC,OAC3F5L,GAAMuK,kCAAkCjH,EAAekH,EAAuBC,GAAsB5K,KAAK,WACrGG,EAAM8K,cAAcC,GAAUlL,KAAK,SAAUgM,GACzCA,EAAgB1M,QAAQ,SAAUyL,GAC9B,GAAKA,EAAG1B,SAASkC,IAAjB,CAGA,GAAIU,GAAqBtB,EAAsBuB,cAAczP,EAAOa,KAAK2G,iBAAiB8G,EAAG1B,SAASkC,MAClGY,EAAWF,EAAmBG,aAClCzB,GAAsB0B,WAAWF,EAAUpB,EAAGuB,KAAMvB,EAAGwB,UAE3D9I,EAAcgB,kBAAkBlE,EAASA,QAGlDA,MAGX4H,EAAYtL,UAAUyN,oBAAsB,SAAUkB,EAAMgB,GACxD,MAAO,IAAIzL,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpB4H,EAAwB1C,mBAAmBD,qBAAuB,IAAMyC,EACxEG,EAAO9H,EAAI+H,2BAA2BF,GACtCe,EAAoBd,EAAKe,uBAC7BzJ,QAAOtG,KAAK6P,GAAgBlN,QAAQ,SAAUvC,GAC1C0P,EAAkBE,SAAS5P,EAAKyP,EAAezP,MAEnD0P,EAAkBjI,SAClBf,EAAcgB,kBAAkBlE,EAASA,MAGjD4H,EAAYtL,UAAU+P,2BAA6B,SAAUC,EAAgBjO,GAGzE,IAFA,GAAIkO,GAAoB9D,mBAAmBD,qBAAuB,IAAMnK,EACpEmO,EAA2BF,EAAeG,gBACvCD,EAAyBE,YAAY,CACxC,GAAIC,GAAOH,EAAyBnJ,aACpC,IAAIsJ,EAAKC,wBAAwBC,WAAWC,gBAAkBP,EAAkBO,cAC5E,MAAOH,GAGf,MAAO,OAEX/E,EAAYtL,UAAU2N,kBAAoB,SAAUpC,GAChD,GAAIjI,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,UACpBwJ,KACAC,KACAC,IACJpF,GAAQ9I,QAAQ,SAAU8F,GACjBA,EAAIyE,OAGTzE,EAAIyE,MAAMvK,QAAQ,SAAU/C,GACxB+Q,EAAQ/Q,EAAEkR,MAAQH,EAAQ/Q,EAAEkR,UAC5BH,EAAQ/Q,EAAEkR,MAAMtQ,KAAK+K,EAAS5K,KAAKyB,OAAOxC,GAAK4J,IAAOf,EAAI0D,YAGlE7F,OAAOtG,KAAK2Q,GAAShO,QAAQ,SAAUpD,EAAGc,GACtCuQ,EAAMpQ,KAAK0G,EAAI6J,YAAYC,WAAWzR,IACtCsR,EAAoBrQ,KAAK0G,EAAI6J,YAAYC,WAAWzR,GAAG0R,aACvDnK,EAAc0B,KAAKoI,EAAMvQ,IACzByG,EAAc0B,KAAKqI,EAAoBxQ,MAE3CyG,EAAcgB,kBAAkB,WAC5BxB,OAAOtG,KAAK2Q,GAAShO,QAAQ,SAAUpD,EAAGc,GACtC,GAAI6Q,GAAQP,EAAQpR,GAChB4R,EAAOP,EAAMvQ,GACb6P,EAAiBW,EAAoBxQ,EACzC6Q,GAAMvO,QAAQ,SAAU/C,GACpB,GAAI2Q,GAAO/M,EAAMyM,2BAA2BC,EAAgBtQ,EAAE4J,IAC9D,IAAY,MAAR+G,EAAJ,CAYA,GATI3Q,EAAEwR,OACFb,EAAKc,UAAUzR,EAAEwR,OAEjBxR,EAAE0R,OACFf,EAAKgB,cAAc3R,EAAE0R,OAErB1R,EAAE4R,UACFjB,EAAKkB,aAAa7R,EAAE4R,UAEpB5R,EAAE8R,YAAc9R,EAAE8R,WAAWjS,OAAS,EAAG,CACzC,GAAIkS,GAAYpB,EAAKqB,gBACrBD,GAAUE,YACVjS,EAAE8R,WAAW/O,QAAQ,SAAUmP,GAC3BH,EAAUpR,IAAIuR,KAGtBvB,EAAK1I,YAETf,EAAc0B,KAAK0H,GACnBiB,EAAKtJ,WAETf,EAAcgB,kBAAkBlE,EAASA,IAC1CA,MAGX4H,EAAYtL,UAAUsM,sBAAwB,SAAUuF,GACpD,GAAIC,GAAQD,EAASC,MAAM,IAC3B,OAAOA,GAAM7Q,OAAO,EAAG6Q,EAAMvS,OAAS,GAAGwS,KAAK,MAElDzG,EAAYtL,UAAUgM,wBAA0B,SAAU6F,GACtD,GAAIC,GAAQD,EAASC,MAAM,IAC3B,OAAOA,GAAMA,EAAMvS,OAAS,IAEzB+L,GACThF,EAAoBwB,kBACtBhK,GAAQwN,YAAcA,MAIvB0G,sBAAsB,GAAGjK,UAAU,GAAGC,sBAAsB,IAAIiK,GAAG,SAAShT,EAAQlB,EAAOD,IAC9F,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,0BAA2B,0BAA2ByB,IAEzF,SAAUR,EAASnB,GAClB,YACA,IAAIoU,GAAejT,EAAQ,2BACvBkT,EAAYlT,EAAQ,0BACpB6I,EAAqB,WACrB,QAASA,GAAkBnF,GACvBrE,KAAKqE,KAAOA,EACZrE,KAAKoN,WAAa,GAAIwG,GAAazQ,WAWvC,MATAqG,GAAkB9H,UAAUyG,iBAAmB,SAAU8E,EAAS6G,GAC9D,MAAO,IAAIlO,SAAQ,SAAUR,EAASG,GAAUH,EAAQ,uBAE5DoE,EAAkB9H,UAAU2G,cAAgB,WACxCwL,EAAUE,OAAOC,MAAMhU,KAAKqE,KAAO,mCAEvCmF,EAAkB9H,UAAU6H,YAAc,WACtCsK,EAAUE,OAAOC,MAAMhU,KAAKqE,KAAO,mCAEhCmF,IAEXhK,GAAQgK,kBAAoBA,MAG7ByK,0BAA0B,EAAEC,yBAAyB,KAAKC,IAAI,SAASxT,EAAQlB,EAAOD,GACzF,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,yBAA0B,uBAAwByB,IAErF,SAAUR,EAASnB,GAClB,YACA,IAAI4U,GAAczT,EAAQ,0BACtBqH,EAAsBrH,EAAQ,uBAC9B0T,EAAe,SAAUnM,GAEzB,QAASmM,KACLnM,EAAOlH,KAAKhB,KAAM,SA4etB,MA9eAwH,GAAU6M,EAAanM,GAIvBmM,EAAY3S,UAAUyG,iBAAmB,SAAU8E,GAC/C,GAAIjI,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjC2J,EAAQ9J,EAAcK,UAAU4J,YAChC+B,IACJhM,GAAc0B,KAAKoI,GACnB9J,EAAcgB,kBAAkB,WAC5B2D,EAAQ9I,QAAQ,SAAU8F,EAAKpI,GAC3B,GAAI0S,GAAcnC,EAAMjI,WAAWC,OAAO,SAAUuI,GAChD,MAAOA,GAAKrI,cAAgBL,EAAIM,QACjC,EACH,IAAIgK,EACItK,EAAIQ,aACJ8J,EAAY7J,gBAAgBT,EAAIQ,aAEPpJ,SAAzB4I,EAAIuK,kBACJD,EAAYE,qBAAqBxK,EAAIuK,kBAETnT,SAA5B4I,EAAIyK,qBACJH,EAAYI,wBAAwB1K,EAAIyK,qBAEfrT,SAAzB4I,EAAI2K,kBACJL,EAAYM,qBAAqB5K,EAAI2K,kBAERvT,SAA7B4I,EAAI6K,sBACJP,EAAYQ,yBAAyB9K,EAAI6K,sBAEfzT,SAA1B4I,EAAI+K,mBACJT,EAAYU,sBAAsBhL,EAAI+K,mBAEtB3T,SAAhB4I,EAAIiL,SACJX,EAAYY,YAAYlL,EAAIiL,SAE5BjL,EAAImL,uBACJb,EAAYc,0BAA0BpL,EAAImL,uBAE1CnL,EAAIqL,oBACJf,EAAYgB,uBAAuBtL,EAAIqL,oBAEvCrL,EAAIuL,mBACJjB,EAAYkB,sBAAsBxL,EAAIuL,mBAEtCvL,EAAIyL,wBACJnB,EAAYoB,2BAA2BpN,GAAGqN,oBAAoB3L,EAAIyL,yBAElEzL,EAAIuB,UACJ+I,EAAY9I,aAAaxB,EAAIuB,UAEdnK,SAAf4I,EAAI4L,QACJtB,EAAYuB,WAAW7L,EAAI4L,QAELxU,SAAtB4I,EAAI8L,eACJxB,EAAYyB,kBAAkB/L,EAAI8L,eAEtCxB,EAAYlL,SACZiL,EAActS,KAAKuS,GACnBjM,EAAc0B,KAAKsK,EAAczS,QAEhC,CACD,GAAI2I,GAAyB,GAAIjC,IAAG0N,uBAIpC,IAHIhM,EAAIQ,aACJD,EAAuBE,gBAAgBT,EAAIQ,aAErBpJ,SAAtB4I,EAAIiM,cAA6B,CACjC,GAAI9R,GAAQ6F,EAAIiM,cAAgB3N,GAAG4N,mBAAmBC,GAAK7N,GAAG4N,mBAAmBE,GACjF7L,GAAuB8L,sBAAsBlS,GAE7C6F,EAAIsM,cACJ/L,EAAuBgM,iBAAiBvM,EAAIsM,cAE5CtM,EAAIM,OACJC,EAAuBO,UAAUd,EAAIM,OAErCN,EAAIe,KACJR,EAAuBS,QAAQhB,EAAIe,IAEvC,IAAIyL,GAAcrE,EAAMrQ,IAAIyI,EA4B5B,IA3B6BnJ,SAAzB4I,EAAIuK,kBACJiC,EAAYhC,qBAAqBxK,EAAIuK,kBAETnT,SAA5B4I,EAAIyK,qBACJ+B,EAAY9B,wBAAwB1K,EAAIyK,qBAEfrT,SAAzB4I,EAAI2K,kBACJ6B,EAAY5B,qBAAqB5K,EAAI2K,kBAERvT,SAA7B4I,EAAI6K,sBACJ2B,EAAY1B,yBAAyB9K,EAAI6K,sBAEfzT,SAA1B4I,EAAI+K,mBACJyB,EAAYxB,sBAAsBhL,EAAI+K,mBAEtB3T,SAAhB4I,EAAIiL,SACJuB,EAAYtB,YAAYlL,EAAIiL,SAE5BjL,EAAImL,uBACJqB,EAAYpB,0BAA0BpL,EAAImL,uBAE1CnL,EAAIqL,oBACJmB,EAAYlB,uBAAuBtL,EAAIqL,oBAEvCrL,EAAIuL,mBACJiB,EAAYhB,sBAAsBxL,EAAIuL,mBAEtCvL,EAAIyL,uBAAwB,CAC5B,GAAItR,GAAQmE,GAAGqN,oBAAoB3L,EAAIyL,uBAAuBgB,oBAC9DD,GAAYd,2BAA2BvR,GAEvC6F,EAAIuB,UACJiL,EAAYhL,aAAaxB,EAAIuB,UAEdnK,SAAf4I,EAAI4L,QACJY,EAAYX,WAAW7L,EAAI4L,QAELxU,SAAtB4I,EAAI8L,eACJU,EAAYT,kBAAkB/L,EAAI8L,eAEtCzB,EAActS,KAAKyU,GACnBnO,EAAc0B,KAAKsK,EAAczS,OAGzCyG,EAAcgB,kBAAkB,WAC5B,GAAIqN,GAAY,GAAIvC,GAAYwC,WAC5B5R,EAAM6R,yBACN7R,EAAM8R,2BACN9R,EAAM+R,YACN/R,EAAMgS,kBACNhS,EAAMiS,kBACNjS,EAAMkS,YACNlS,EAAMmS,eACNnS,EAAMoS,gBACL5O,cAAeF,EAAe+O,cAAe/C,EAAegD,QAASrK,GAAWjI,EACrF2R,GAAUY,UAAU1S,KAAK,WACrBqD,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,OAEL,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,OAEL,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,SAIZiP,EAAY3S,UAAU8V,4CAA8C,SAAUlP,EAAeqK,GACzF,GAAI8E,GAAiB9E,EAAK+E,qBACtBC,EAAuB,GAAIpP,IAAGqP,0CAClCD,GAAqBE,iBAAiB,mDACtCF,EAAqBG,oBAAoB,GACzCH,EAAqBI,mBAAmB,KACxCJ,EAAqBK,qBAAqB,2GAE1CL,EAAqBM,kBAAkB,6EACvCN,EAAqBO,cAAc3P,GAAG4P,kBAAkBC,WACxDX,EAAe1V,IAAI4V,GACnBhF,EAAKtJ,UAETgL,EAAY3S,UAAU0V,cAAgB,SAAUiB,GAC5C,GAAIrT,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC8S,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACzB,IAAKoI,EAAIqO,QAAT,CAGA,GAAIC,GAA0B1K,mBAAmBD,qBAAuB,IAAM3D,EAAIe,IAC9EwN,EAAazX,EAAE0X,iBACfC,EAAmB,qBACnBC,GAAsB,CAiB1B,IAhBA1O,EAAIqO,QAAQnU,QAAQ,SAAU5E,GAC1B,GAAIqZ,GAAYL,EAA0B,IAAMhZ,EAAEmM,IAElD,IADA8M,EAAWK,cAAc9W,IAAI6W,GACzBrZ,EAAEuZ,cAAe,CACjB,GAAItX,GAAOsG,OAAOtG,KAAKjC,EAAEuZ,eAAe7X,MACpCO,GAAO,IACPkX,GAAoB,YAAcE,EAAY,KAC9C9Q,OAAOtG,KAAKjC,EAAEuZ,eAAe3U,QAAQ,SAAUvC,GAC3C8W,GAAoB,4BAA+B9W,EAAM,KAAQrC,EAAEuZ,cAAclX,GAAO,oBAE5F8W,GAAoB,QAExBC,GAAsB,KAG9BD,GAAoB,sBAChBC,EAAqB,CACrB,GAAII,GAAiC,GAAIxQ,IAAGqG,uBAC5CmK,GAA+B9N,QAAQsN,EAA0B,4CACjEQ,EAA+BjK,YAAY,GAAIvG,IAAGwG,wBAClDgK,EAA+BlK,eAAc,EAC7C,KAAK,GAAIjO,GAAI,EAAGA,EAAI8X,EAAiBzX,OAAQL,IACzCmY,EAA+B/J,cAAc1K,OAAOoU,EAAiBzJ,WAAWrO,GAEpF4X,GAAWtJ,YAAYnN,IAAIgX,GAC3B/T,EAAMwS,4CAA4Ca,EAAO7P,cAAezH,OAGhFsX,EAAO7P,cAAcc,kBAAkBlE,EAASA,MAGxDiP,EAAY3S,UAAUmV,yBAA2B,SAAUwB,GACvD,MAAO,IAAIzS,SAAQ,SAAUR,EAASG,GAClC,GAAIyT,GAASX,EAAO7P,cAAcyQ,WAAWC,cAAcC,mBACvDC,IACJf,GAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtCuX,EAAQpX,KAAKjB,EAAEoY,oBACfd,EAAO7P,cAAcwB,KAAKoP,EAAQvX,GAAQ,oBACtCwW,EAAOf,QAAQzV,GAAOwX,sBACtBtY,EAAEuY,yBAAwB,GAC1BvY,EAAEsI,YAGVgP,EAAO7P,cAAcwB,KAAKgP,GAC1BX,EAAO7P,cAAcc,kBAAkB,WACnC+O,EAAOhB,cAAclT,QAAQ,SAAUwO,EAAM9Q,GACzC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACzB,IAAKoI,EAAIoP,oBAAT,CAGA,GAAIE,GAAmBH,EAAQvX,GAC3B2X,EAAuB,GAAIC,MAS/B,IARIxP,EAAIyP,4BAA8BzP,EAAIoP,oBAAoBpY,OAAS,GACnEsY,EAAiBpP,WAAWhG,QAAQ,SAAUwV,GAC1CH,EAAqBxX,KAAK2X,KAGlC1P,EAAIoP,oBAAoBlV,QAAQ,SAAUyV,GACtCL,EAAiBM,uBAAuBb,EAAOc,QAAQF,EAAIG,kBAE3D9P,EAAIyP,4BAA8BzP,EAAIoP,oBAAoBpY,OAAS,EACnE,IAAK,GAAI+Y,GAAI,EAAGA,EAAIR,EAAqBvY,OAAQ+Y,IAAK,CAClD,GAAIC,GAAMT,EAAqBQ,EAC/BC,GAAIC,eAGZvH,EAAKtJ,YAETgP,EAAO7P,cAAcc,kBAAkBlE,EAASA,IACjDA,MAGXiP,EAAY3S,UAAUoV,2BAA6B,SAAUuB,GACzD,MAAO,IAAIzS,SAAQ,SAAUR,EAASG,GAClC,GAAI4U,GAAa9B,EAAO7P,cAAcyQ,WAAWC,cAAckB,YAC/D/B,GAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACrBoI,GAAIoQ,YACJpQ,EAAIoQ,UAAUlW,QAAQ,SAAUmW,GAC5B,GAAIC,GAAQJ,EAAWK,yBAAyBF,EAAG5O,KACnD3K,GAAEqZ,aAAarY,IAAIwY,KAEvBxZ,EAAEsI,YAGVgP,EAAO7P,cAAcc,kBAAkBlE,EAASA,MAGxDiP,EAAY3S,UAAUqV,YAAc,SAAUsB,GAC1C,GAAIrT,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC8S,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACrBoI,GAAIwQ,SACJxQ,EAAIwQ,OAAOtW,QAAQ,SAAU5E,GACzB,GAAImb,GAAW1V,EAAM2V,YAAYpb,EAAG8Y,EAAOhB,cAAetW,GACtD6Z,EAAY5V,EAAM6V,gBAAgBH,EAAU,OAC9B,YAAdE,GAAwC,gBAAdA,GAC1B7Z,EAAEqZ,aAAaU,cAAcJ,GAAU,EAAMnS,GAAGwS,gBAAgBC,wBAGxEja,EAAEsI,YAGVgP,EAAO7P,cAAcc,kBAAkBlE,EAASA,MAGxDiP,EAAY3S,UAAUsV,kBAAoB,SAAUqB,GAChD,GAAIrT,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC8S,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACrBoI,GAAIwQ,SACJxQ,EAAIwQ,OAAOtW,QAAQ,SAAU5E,GACzB,GAAImb,GAAW1V,EAAM2V,YAAYpb,EAAG8Y,EAAOhB,cAAetW,EAC1D,IAAK2Z,EAAL,CAGA,GAAIE,GAAY5V,EAAM6V,gBAAgBH,EAAU,OAC9B,YAAdE,GAAwC,gBAAdA,GAC1B7Z,EAAEqZ,aAAaU,cAAcJ,GAAU,EAAMnS,GAAGwS,gBAAgBC,yBAGxEja,EAAEsI,YAGVgP,EAAO7P,cAAcc,kBAAkBlE,EAASA,MAGxDiP,EAAY3S,UAAUmZ,gBAAkB,SAAUH,EAAUO,GACxD,GAAIC,GAAQ,GAAIC,QAAOF,EAAO,0BAC1BG,EAAQF,EAAMG,KAAKX,EACvB,OAAOU,GAAM,IAEjB/G,EAAY3S,UAAUiZ,YAAc,SAAUJ,EAAOnI,EAAOO,GACxD,GAAI+H,GAAW,EACf,KAAKH,EAAMe,UAAW,CAClB,GAAIC,KACJzT,QAAOtG,KAAK+Y,GAAOpW,QAAQ,SAAUqX,GACjC,GAAIpX,GAAQmW,EAAMiB,EAClB,IAAa,SAATA,EAAiB,CACjB,GAAIC,GAAarJ,EAAMhI,OAAO,SAAUhJ,GACpC,MAAOA,GAAEkJ,cAAgBlG,GAE7B,MAAIqX,EAAWxa,OAAS,GAIpB,MAAO,KAHPmD,GAAQ,IAAMqX,EAAW,GAAGC,SAASzJ,WAAa,IAKtDsJ,EAAavZ,KAAKwZ,EAAO,KAAQpX,EAAQ,QAGjDsW,EAAW,UAAYa,EAAa9H,KAAK,KAAO,IAC7B,eAAf8G,EAAMoB,OACNjB,GAAY,YAAcH,EAAMqB,QAAU,cAE9ClB,GAAY,WAEhB,MAAOA,IAEXrG,EAAY3S,UAAUuV,kBAAoB,SAAUoB,GAChD,MAAO,IAAIzS,SAAQ,SAAUR,EAASG,GAClC8S,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACpBoI,GAAI4R,UAGL5R,EAAI4R,SAASC,uBACb/a,EAAEgb,qBAAqB9R,EAAI4R,SAASG,oBAAqB/R,EAAI4R,SAASI,gBACtElb,EAAEsI,SACFgP,EAAO7P,cAAcwB,KAAKjJ,EAAEmb,yBAGpC,IAAIxT,GAAM2P,EAAO7P,cAAcG,UAC3BwT,EAAgBzT,EAAI0T,oBACpBC,EAAa3T,EAAI4T,iBACjBC,EAAkB7T,EAAI8T,qBAC1BnE,GAAO7P,cAAcwB,KAAKmS,GAC1B9D,EAAO7P,cAAcwB,KAAKuS,GAC1BlE,EAAO7P,cAAcc,kBAAkB,WACnC+O,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACpBoI,GAAI4R,WAGT5R,EAAI4R,SAASY,gBAAgBtY,QAAQ,SAAUuY,GAC3C,GAAIC,GAAU,IAEVA,GAD6B,gBAAtBD,GAAGE,eACAL,EAAgBzC,QAAQ4C,EAAGE,gBAG3BL,EAAgBM,UAAUH,EAAGE,eAE3C,IAAIE,GAAevU,GAAGwU,gCAAgCC,UAAU3E,EAAO7P,cACvEsU,GAAa/a,IAAI4a,EACjB,IAAIM,GAAY,IAChB,IAAIP,EAAGQ,UAAU9B,MAAM,mBAAoB,CACvC,GAAI+B,GAAQT,EAAGQ,UAAUE,UAAU,EAAGV,EAAGQ,UAAUjc,OAAS,GACxDoc,EAAUlB,EAAcmB,kBAAmB,OAASH,EACxDF,GAAYZ,EAAWvC,QAAQuD,OAG/BJ,GAAYZ,EAAWQ,UAAUI,EAErClc,GAAEmb,sBAAsBna,IAAIkb,EAAWH,KAE3C/b,EAAEsI,YAENgP,EAAO7P,cAAcc,kBAAkBlE,EAASA,IACjDA,MAGXiP,EAAY3S,UAAUwV,YAAc,SAAUmB,GAC1C,MAAO,IAAIzS,SAAQ,SAAUR,EAASG,GAClC,GAAI8M,KACJgG,GAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtCwQ,EAAoBrQ,KAAKjB,EAAE0R,aAC3B4F,EAAO7P,cAAcwB,KAAKqI,EAAoBxQ,MAElDwW,EAAO7P,cAAcc,kBAAkB,WACnC+O,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACpBoI,GAAIyE,QAGT2D,EAAoBrQ,KAAKjB,EAAE0R,aAC3B4F,EAAO7P,cAAcwB,KAAKqI,EAAoBxQ,IAC9CoI,EAAIyE,MAAMvK,QAAQ,SAAU/C,GACxB,GAAImc,GAAalL,EAAoBxQ,GAAOsI,WAAWC,OAAO,SAAUoT,GACpE,MAAIvT,GAAIwT,qBAAuBxT,EAAIyE,MAAMzN,OAAS,GAC9Cuc,EAAGtD,gBACI,GAEJsD,EAAGlT,cAAgBlJ,EAAEmJ,QAC7BtJ,OAAS,CACZ,IAAIsc,EAAY,CACZ,GAAIxL,GAAOM,EAAoBxQ,GAAO2Q,WAAWpR,EAAEmJ,MAUnD,IATInJ,EAAEwR,OACFb,EAAKc,UAAUzR,EAAEwR,OAEjBxR,EAAE0R,OACFf,EAAKgB,cAAc3R,EAAE0R,OAErB1R,EAAE4R,UACFjB,EAAKkB,aAAa7R,EAAE4R,UAEpB5R,EAAE8R,YAAc9R,EAAE8R,WAAWjS,OAAS,EAAG,CACzC,GAAIkS,GAAYpB,EAAKqB,gBACrBD,GAAUE,YACVjS,EAAE8R,WAAW/O,QAAQ,SAAUmP,GAC3BH,EAAUpR,IAAIuR,KAGlBlS,EAAEsc,OACF3L,EAAK4L,UAAUvc,EAAEsc,OAErB3L,EAAK1I,aAEJ,CACD,GAAIuU,GAA0B,GAAIrV,IAAGsV,uBACjCzc,GAAEmJ,OACFqT,EAAwB7S,UAAU3J,EAAEmJ,OAEpCnJ,EAAE0c,cACFF,EAAwBG,iBAAiB3c,EAAE0c,cAE3C1c,EAAEwR,OACFgL,EAAwB/K,UAAUzR,EAAEwR,OAEpCxR,EAAE0R,OACF8K,EAAwBI,UAAU5c,EAAE0R,OAEpC1R,EAAE4R,UACF4K,EAAwB3K,aAAa7R,EAAE4R,UAEvC5R,EAAE6c,kBACFL,EAAwBM,qBAAqB9c,EAAE6c,kBAE/C7c,EAAE8R,YACF0K,EAAwBO,eAAe/c,EAAE8R,YAEzC9R,EAAEgd,cACFR,EAAwBS,iBAAiB9V,GAAG+V,SAASC,KAEzD,IAAIxM,GAAOhR,EAAE0R,YAAY1Q,IAAI6b,EACzBxc,GAAEsc,QACF3L,EAAK4L,UAAUvc,EAAEsc,OACjB3L,EAAK1I,UAETtI,EAAEsI,SAENgP,EAAO7P,cAAcwB,KAAKjJ,EAAE0R,kBAGpC4F,EAAO7P,cAAcc,kBAAkBlE,EAASA,IACjDA,MAGXiP,EAAY3S,UAAUyV,eAAiB,SAAUkB,GAC7C,MAAO,IAAIzS,SAAQ,SAAUR,EAASG,GAClC8S,EAAOhB,cAAclT,QAAQ,SAAUpD,EAAGc,GACtC,GAAIoI,GAAMoO,EAAOf,QAAQzV,EACrBoI,GAAIuU,UACJvU,EAAIuU,SAASra,QAAQ,SAAU7D,GAC3B,GAAIme,GAAO1d,EAAE2d,QAAQ,GAAInW,IAAGoW,4BAC5B7W,QAAOtG,KAAKlB,GAAG6D,QAAQ,SAAUvC,GAC7B6c,EAAKjN,SAAS5P,EAAKtB,EAAEsB,MAEzB6c,EAAKpV,SACLgP,EAAO7P,cAAcwB,KAAKyU,OAItCpG,EAAO7P,cAAcc,kBAAkBlE,EAASA,MAGjDiP,GACTrM,EAAoBwB,kBACtBhK,GAAQ6U,YAAcA,MAGvBuK,yBAAyB,GAAGlV,sBAAsB,IAAImV,IAAI,SAASle,EAAQlB,EAAOD,GACrF,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,UAAW,uBAAwByB,IAEtE,SAAUR,EAASnB,GAClB,YACA,IAAI8B,GAASX,EAAQ,WACjBqH,EAAsBrH,EAAQ,uBAC9Bme,EAAoB,SAAU5W,GAE9B,QAAS4W,KACL5W,EAAOlH,KAAKhB,KAAM,cAgFtB,MAlFAwH,GAAUsX,EAAkB5W,GAI5B4W,EAAiBpd,UAAUyG,iBAAmB,SAAUC,GACpD,GAAIpD,GAAQhF,IACZkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,KACpC,IAAIsI,GAAgBC,GAAGC,cAAcC,cACjCsW,EAAazW,EAAcK,UAAUqW,gBACzC,OAAO,IAAIpZ,SAAQ,SAAUR,EAASG,GAClCP,EAAMia,qBAAqB7W,EAAO8W,YAAa5W,EAAetD,EAAMoI,WAAY2R,GAAYla,KAAK,WAC7FqD,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCO,SAIZuZ,EAAiBpd,UAAUyd,6BAA+B,SAAUC,EAAgBC,GAChF,GAAI9f,GAAI6f,EAAehV,OAAO,SAAU1H,GACpC,MAAOA,GAAI4H,cAAgB+U,GAE/B,OAAO9f,GAAE,IAAM,MAGnBuf,EAAiBpd,UAAUud,qBAAuB,SAAUK,EAAOhX,EAAe8E,EAAY2R,GAC1F,GAAI/Z,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAqB,IAAjB+Z,EAAMre,OACNmE,QAEC,CACD,GAAIma,GAA8BR,EAAWS,iBAC7ClX,GAAc0B,KAAKuV,GACnBjX,EAAcgB,kBAAkB,WAG5B,IAFA,GAAImW,MACA5d,EAAQ0d,EAA4BG,YAAc,EAC/C7d,GAAS,GAAG,CACf,GAAI8d,GAAUJ,EAA4BK,OAAO/d,EACjD4d,GAAqBzd,KAAK2d,GAC1BA,EAAQzF,eACRrY,IAEJyG,EAAcgB,kBAAkB,WAC5BgW,EAAMnb,QAAQ,SAAU9D,GACpB,GAAIwf,GAAe7a,EAAMma,6BAA6BM,EAAsBpf,EAAEkK,OAC1EuV,EAAU,GAAIvX,IAAGwX,iCACrBD,GAAQ/U,UAAU1K,EAAEkK,OACpBuV,EAAQ7U,QAAQ4U,EAAeA,EAAaG,UAAY1e,EAAOa,KAAK2G,iBAAiBzI,EAAE2K,MACvF8U,EAAQG,gBAAe,GACvBV,EAA4Bxd,IAAI+d,KAEpCxX,EAAcgB,kBAAkB,WAC5B8D,EAAWzL,IAAIkM,mBAAmBqS,eAAiB,oCAAoCrb,KAAK,SAAUM,GAClGA,EAAS0B,OAAOhC,KAAK,SAAUgC,GAC3BA,EAAKzC,MAAMD,QAAQ,SAAUsD,GACzB,GAAI0Y,GAAOpB,EAAWqB,YAAY3Y,EAAE4Y,IAChCC,EAAyBH,EAAKI,eAC9BC,EAAalB,EAAMlV,OAAO,SAAUhG,GAAS,MAAOA,GAAMmG,QAAU9C,EAAE8C,QAAU,EAChFiW,IAAcA,EAAWC,UACzBD,EAAWC,SAAStc,QAAQ,SAAU9D,GAClC,GAAIwf,GAAe7a,EAAMma,6BAA6BM,EAAsBpf,EAAEkK,OAC1EuV,EAAU,GAAIvX,IAAGwX,iCACrBD,GAAQ/U,UAAU1K,EAAEkK,OACpBuV,EAAQ7U,QAAQ4U,EACVA,EAAaG,UACb1e,EAAOa,KAAK2G,iBAAiBzI,EAAE2K,MACrC8U,EAAQG,gBAAe,GACvBK,EAAuBve,IAAI+d,OAIvCxX,EAAcgB,kBAAkBlE,EAASA,QAGlDA,WAMhB0Z,GACT9W,EAAoBwB,kBACtBhK,GAAQsf,iBAAmBA,MAG5BrV,UAAU,GAAGC,sBAAsB,IAAIgX,IAAI,SAAS/f,EAAQlB,EAAOD,GACtE,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,UAAW,uBAAwByB,IAEtE,SAAUR,EAASnB,GAClB,YACA,IAAI8B,GAASX,EAAQ,WACjBqH,EAAsBrH,EAAQ,uBAC9BggB,EAA4B,SAAUzY,GAEtC,QAASyY,KACLzY,EAAOlH,KAAKhB,KAAM,sBAgDtB,MAlDAwH,GAAUmZ,EAA0BzY,GAIpCyY,EAAyBjf,UAAUyG,iBAAmB,SAAUyY,GAC5D,GAAI5b,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAKqb,GAA8B,IAAnBA,EAAQ3f,OAGnB,CAKD,IAAK,GAJD4f,GAAkBtY,GAAGC,cAAcC,cACnCqY,EAAQD,EAAgBlY,UACxBoY,EAAYD,EAAM1E,oBAClB4E,KACKpgB,EAAI,EAAGA,EAAIggB,EAAQ3f,OAAQL,IAAK,CACrC,GAAIqgB,GAAQL,EAAQhgB,EACpBmgB,GAAUvP,SAASyP,EAAMC,IAAKD,EAAME,OAChCF,EAAMG,SACNJ,EAAoBhf,KAAKV,EAAOa,KAAKkf,kBAAkBJ,EAAMC,MAKrEJ,EAAMzX,SACNwX,EAAgB7W,KAAK+W,GACrBF,EAAgBvX,kBAAkB,WAC1B0X,EAAoB/f,OAAS,GAC7B8f,EAAUvP,SAAS,0BAA2BwP,EAAoBvN,KAAK,MACvEqN,EAAMzX,SACNwX,EAAgBvX,kBAAkB,WAC9BpB,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,QAIJ8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,MAEL,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,UApCJA,QAyCLub,GACT3Y,EAAoBwB,kBACtBhK,GAAQmhB,yBAA2BA,MAGpClX,UAAU,GAAGC,sBAAsB,IAAI4X,IAAI,SAAS3gB,EAAQlB,EAAOD,GACtE,GAAIgI,GAAaxH,MAAQA,KAAKwH,WAAc,SAAUC,EAAGC,GAErD,QAASC,KAAO3H,KAAK4H,YAAcH,EADnC,IAAK,GAAII,KAAKH,GAAOA,EAAElF,eAAeqF,KAAIJ,EAAEI,GAAKH,EAAEG,GAEnDJ,GAAE/F,UAAkB,OAANgG,EAAaI,OAAOC,OAAOL,IAAMC,EAAGjG,UAAYgG,EAAEhG,UAAW,GAAIiG,MAEnF,SAAWxG,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,uBAAwByB,IAE3D,SAAUR,EAASnB,GAClB,YACA,IAAIwI,GAAsBrH,EAAQ,uBAC9B4gB,EAAqB,SAAUrZ,GAE/B,QAASqZ,KACLrZ,EAAOlH,KAAKhB,KAAM,eAsCtB,MAxCAwH,GAAU+Z,EAAmBrZ,GAI7BqZ,EAAkB7f,UAAUyG,iBAAmB,SAAUC,GACrD,GAAIpD,GAAQhF,IAEZ,OADAkI,GAAOxG,UAAU2G,cAAcrH,KAAKhB,MAC7B,GAAI4F,SAAQ,SAAUR,EAASG,GAClC,GAAI+C,GAAgBC,GAAGC,cAAcC,cACjCC,EAAMJ,EAAcK,SACpBP,GAAOoZ,cACP9Y,EAAI+P,iBAAiBgJ,gBAAgBrZ,EAAOoZ,aAC5C9Y,EAAI+P,iBAAiBpP,UAErBjB,EAAOsZ,WACPhZ,EAAIiZ,cAAcvZ,EAAOsZ,WAEzBtZ,EAAOwZ,iBACPlZ,EAAImZ,oBAAoBzZ,EAAOwZ,iBAEMvgB,SAArC+G,EAAO0Z,2BACPpZ,EAAIqZ,8BAA8B3Z,EAAO0Z,2BAEXzgB,SAA9B+G,EAAO4Z,oBACPtZ,EAAIqZ,8BAA8B3Z,EAAO4Z,oBAEd3gB,SAA3B+G,EAAO6Z,iBACPvZ,EAAIwZ,oBAAoB9Z,EAAO6Z,iBAEnCvZ,EAAIW,SACJf,EAAc0B,KAAKtB,GACnBJ,EAAcgB,kBAAkB,WAC5BpB,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,KACD,WACC8C,EAAOxG,UAAU6H,YAAYvI,KAAKgE,GAClCI,SAILmc,GACTvZ,EAAoBwB,kBACtBhK,GAAQ+hB,kBAAoBA,MAG7B7X,sBAAsB,IAAIyY,IAAI,SAASxhB,EAAQlB,EAAOD,IACzD,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB,YACA,IAAI4iB,GAAoB,WACpB,QAASA,GAAiB/d,EAAMxC,EAAOoL,EAAS6G,EAAYuO,GACxDriB,KAAKqE,KAAOA,EACZrE,KAAK6B,MAAQA,EACb7B,KAAKiN,QAAUA,EACfjN,KAAK8T,WAAaA,EAClB9T,KAAKqiB,QAAUA,EAcnB,MAZAD,GAAiB1gB,UAAU6V,QAAU,SAAU+K,GAC3C,GAAItd,GAAQhF,KACRuiB,EAAW,GAAIviB,MAAKqiB,OACxB,OAAKC,GAGE,GAAI1c,SAAQ,SAAUR,EAASG,GAClC+c,EAAiBzd,KAAK,WAClB,MAAO0d,GAASpa,iBAAiBnD,EAAMiI,QAASjI,EAAM8O,YAAYjP,KAAKO,EAASA,OAJ7Emd,EAASpa,iBAAiBnI,KAAKiN,QAASjN,KAAK8T,aAQrDsO,IAEX5iB,GAAQ4iB,iBAAmBA,SAGzBI,IAAI,SAAS7hB,EAAQlB,EAAOD,IAClC,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB;AACA,GAAIoX,GAAa,WACb,QAASA,GAAU6L,EAAWC,EAAWC,GACrC3iB,KAAKyiB,UAAYA,EACjBziB,KAAK0iB,UAAYA,EACjB1iB,KAAK2iB,MAAQA,EAejB,MAbA/L,GAAUlV,UAAU6V,QAAU,SAAUqL,GACpC,GAAIC,GAAkBjd,QAAQR,SAU9B,OATApF,MAAKyiB,UAAUte,QAAQ,SAAU2e,EAAkBC,GAC/CF,EAAkBA,EAAgBhe,KAAK,WACnC,MAAOie,GAAiB9hB,KAAKhB,KAAK2iB,MAAO3iB,KAAK0iB,aAC/C7d,KAAK,SAAUme,GACVJ,GACAA,EAAiB5hB,KAAKhB,KAAM+iB,EAAY/iB,KAAKyiB,cAGtDziB,MACI6iB,GAEJjM,IAEXpX,GAAQoX,UAAYA,SAGlBqM,IAAI,SAAStiB,EAAQlB,EAAOD,IAClC,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,UAAW,qBAAsB,oCAAqC,4CAA6C,kCAAmC,qCAAsC,sCAAuC,uCAAwC,+BAAgC,+BAAgC,SAAU,sBAAuB,wBAAyByB,IAE7Z,SAAUR,EAASnB,GAClB,YACA,IAAI0jB,GAAqBviB,EAAQ,sBAC7BwiB,EAAqBxiB,EAAQ,qCAC7ByiB,EAA6BziB,EAAQ,6CACrC0iB,EAAmB1iB,EAAQ,mCAC3B2iB,EAAsB3iB,EAAQ,sCAC9B4iB,EAAuB5iB,EAAQ,uCAC/B6iB,EAAwB7iB,EAAQ,wCAChC8iB,EAAgB9iB,EAAQ,gCACxB+iB,EAAgB/iB,EAAQ,gCACxBW,EAASX,EAAQ,UACjBkT,EAAYlT,EAAQ,uBACpBiT,EAAejT,EAAQ,wBACvBT,EAAgB,WAChB,QAASA,KACLF,KAAK2jB,UACDC,WAAcT,EAAmBrE,iBACjC+E,mBAAsBT,EAA2BzC,yBACjDmD,SAAYT,EAAiBhX,eAC7B0X,YAAeT,EAAoB/B,kBACnCyC,aAAgBT,EAAqBtb,mBACrCgc,cAAiBT,EAAsB5Z,oBACvCsa,MAAST,EAAczW,YACvBmX,MAAST,EAAcrP,aAE3BrU,KAAKoN,WAAa,GAAIwG,GAAazQ,WAoDvC,MAlDAjD,GAAawB,UAAU0iB,cAAgB,SAAUC,GAC7C,GAAIrf,GAAQhF,KACRyD,EAAMnC,EAAOa,KAAK2G,iBAAiBub,EACvC,OAAO,IAAIze,SAAQ,SAAUR,EAASG,GAClCP,EAAMoI,WAAWzL,IAAI8B,GAAKoB,KAAK,SAAUM,GACjCA,EAASmf,GACTnf,EAAS0B,OAAOhC,KAAK,SAAU0f,GAC3Bvf,EAAMwf,MAAMD,EAAUzc,OAAOtG,KAAK+iB,IAAW1f,KAAKO,EAASG,KAI/DA,EAAOJ,EAASsf,aAErB,SAAUnV,GACTuE,EAAUE,OAAOC,MAAM,iDAAkDH,EAAUE,OAAO2Q,SAAS7jB,YAI/GX,EAAawB,UAAU8iB,MAAQ,SAAU3d,EAAM8d,GAC3C,GAAI3f,GAAQhF,IACZ,OAAO,IAAI4F,SAAQ,SAAUR,EAASG,GAClCP,EAAM4f,WAAY,GAAIpe,OAAOY,UAC7BpC,EAAM6f,cACNF,EAAMxgB,QAAQ,SAAU2gB,EAAGjjB,GAClBmD,EAAM2e,SAASmB,IAGpB9f,EAAM6f,WAAW7iB,KAAK,GAAIkhB,GAAmBd,iBAAiB0C,EAAGjjB,EAAOgF,EAAKie,GAAIje,EAAKke,WAAY/f,EAAM2e,SAASmB,MAErH,IAAI3X,KACJA,GAASnL,KAAK,GAAI4D,SAAQ,SAAUsK,GAChC2D,EAAUE,OAAOC,MAAM,6CAA8CH,EAAUE,OAAO2Q,SAASM,MAC/F9U,MAGJ,KADA,GAAIrO,GAAQ,EAC2BR,SAAhC2D,EAAM6f,WAAWhjB,EAAQ,IAAkB,CAC9C,GAAIjB,GAAIuM,EAASlM,OAAS,CAC1BkM,GAASnL,KAAKgD,EAAM6f,WAAWhjB,EAAQ,GAAG0V,QAAQpK,EAASvM,KAC3DiB,IAGJ+D,QAAQ2H,IAAIJ,GAAUtI,KAAK,SAAUT,GACjCyP,EAAUE,OAAOC,MAAM,2CAA4CH,EAAUE,OAAO2Q,SAASM,MAC7F5f,EAAQhB,IACT,SAAUkL,GACTuE,EAAUE,OAAOC,MAAM,2CAA6CiR,KAAKC,UAAU5V,GAAQuE,EAAUE,OAAO2Q,SAAS7jB,OACrH0E,EAAO+J,QAIZpP,IAEXV,GAAQU,aAAeA,MAGxBilB,uBAAuB,EAAEC,sBAAsB,GAAGC,sCAAsC,EAAEC,uCAAuC,EAAEC,kCAAkC,EAAEC,+BAA+B,EAAEC,+BAA+B,GAAGC,oCAAoC,GAAGC,4CAA4C,GAAGC,qCAAqC,GAAGC,qBAAqB,GAAGC,SAAS,KAAKC,IAAI,SAASplB,EAAQlB,EAAOD,IAC7a,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB,YACA,IAAI2C,GAAQ,WACR,QAASA,MAoBT,MAlBAA,GAAKiH,eAAiB,SAAU3F,GAC5B,MAAOA,GAAIuiB,QAAQC,SAASC,SAASC,SAAW,KAAOF,SAASC,SAASE,SAAU,KAEvFjkB,EAAK2G,iBAAmB,SAAUrF,GAC9B,MAAOA,GAAIuiB,QAAQ,UAAWnY,mBAAmBqS,gBAC5C8F,QAAQ,oBAAqBnY,mBAAmBwY,iBAChDL,QAAQ,kBAAmBnY,mBAAmBwY,gBAAkB,wBAGzElkB,EAAKkf,kBAAoB,SAAUiF,GAE/B,IAAK,GADDC,MACK3lB,EAAI,EAAGA,EAAI0lB,EAAQrlB,SAAUL,EAClC2lB,EAAMvkB,KAAKskB,EAAQrX,WAAWrO,IAC9B2lB,EAAMvkB,KAAK,EAEf,IAAIwkB,GAAa3mB,OAAO4mB,KAAKC,OAAOC,aAAaC,MAAM,KAAML,GAC7D,OAAOC,IAEJrkB,IAEX3C,GAAQ2C,KAAOA,SAGb0kB,IAAI,SAASlmB,EAAQlB,EAAOD,IAClC,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB,YACA,IAAIuU,GAAU,WACV,QAASA,MAmDT,MAjDAjM,QAAOgf,eAAe/S,EAAQ,kBAC1BpS,IAAK,WACD,MAAOoS,GAAOgT,SAASC,gBAE3BC,IAAK,SAAU7iB,GACX2P,EAAOgT,SAASC,eAAiB5iB,GAErC8iB,YAAY,EACZC,cAAc,IAElBrf,OAAOgf,eAAe/S,EAAQ,YAC1BpS,IAAK,WAID,MAHgC,mBAArBoS,GAAOqT,WAAkD,OAArBrT,EAAOqT,YAClDrT,EAAOqT,UAAY,GAAIC,IAEpBtT,EAAOqT,WAElBF,YAAY,EACZC,cAAc,IAElBpT,EAAOuT,UAAY,WAEf,IAAK,GADDC,MACKC,EAAK,EAAGA,EAAKC,UAAUxmB,OAAQumB,IACpCD,EAAUC,EAAK,GAAKC,UAAUD,EAElC,KAAK,GAAI5mB,GAAI,EAAGA,EAAI2mB,EAAUtmB,OAAQL,IAClCmT,EAAOgT,SAASO,UAAUC,EAAU3mB,KAG5CmT,EAAO2T,iBAAmB,WACtB,MAAO3T,GAAOgT,SAASW,oBAE3B5f,OAAOgf,eAAe/S,EAAQ,SAC1BpS,IAAK,WACD,MAAOoS,GAAOgT,SAASjkB,OAE3BokB,YAAY,EACZC,cAAc,IAElBpT,EAAOC,MAAQ,SAAU2T,EAASC,GAChB,SAAVA,IAAoBA,EAAQ7T,EAAO2Q,SAASmD,SAChD9T,EAAOgT,SAASe,KAAMF,MAAOA,EAAOD,QAASA,KAEjD5T,EAAO+T,IAAM,SAAU7G,GACnBlN,EAAOgT,SAASe,IAAI7G,IAExBlN,EAAOgU,QAAU,SAAU1jB,EAAM9E,GAC7B,MAAOwU,GAAOgT,SAASgB,QAAQ1jB,EAAM9E,IAElCwU,IAEXvU,GAAQuU,OAASA,CACjB,IA6CIA,GA7CAsT,EAAc,WACd,QAASA,GAAWL,EAAgBgB,GACT,SAAnBhB,IAA6BA,EAAiBjT,EAAO2Q,SAASuD,SAC9C,SAAhBD,IAA0BA,MAC9BhoB,KAAKgnB,eAAiBA,EACtBhnB,KAAKgoB,YAAcA,EAsCvB,MApCAX,GAAW3lB,UAAU4lB,UAAY,SAAUY,GACvCloB,KAAKgoB,YAAYhmB,KAAKkmB,IAE1Bb,EAAW3lB,UAAUgmB,iBAAmB,WACpC,GAAInnB,GAAIP,KAAKgoB,YAAYG,MAAM,EAE/B,OADAnoB,MAAKgoB,YAAY/mB,OAAS,EACnBV,GAEXuH,OAAOgf,eAAeO,EAAW3lB,UAAW,SACxCC,IAAK,WACD,MAAO3B,MAAKgoB,YAAY/mB,QAE5BimB,YAAY,EACZC,cAAc,IAElBE,EAAW3lB,UAAUsS,MAAQ,SAAU2T,EAASC,GAC9B,SAAVA,IAAoBA,EAAQ7T,EAAO2Q,SAASmD,SAChD7nB,KAAK8nB,KAAMF,MAAOA,EAAOD,QAASA,KAEtCN,EAAW3lB,UAAUomB,IAAM,SAAU7G,GACjC,KAAqB,mBAAVA,IAAyBA,EAAM2G,MAAQ5nB,KAAKgnB,gBAGvD,IAAK,GAAIpmB,GAAI,EAAGA,EAAIZ,KAAKgoB,YAAY/mB,OAAQL,IACzCZ,KAAKgoB,YAAYpnB,GAAGknB,IAAI7G,IAGhCoG,EAAW3lB,UAAUqmB,QAAU,SAAU1jB,EAAM9E,GAC3C6oB,QAAQC,QAAQhkB,EAChB,KACI,MAAO9E,KAEX,QACI6oB,QAAQE,eAGTjB,MAGX,SAAWtT,IACP,SAAW2Q,GACPA,EAASA,EAAkB,QAAI,GAAK,UACpCA,EAASA,EAAe,KAAI,GAAK,OACjCA,EAASA,EAAkB,QAAI,GAAK,UACpCA,EAASA,EAAgB,MAAI,GAAK,QAClCA,EAASA,EAAc,IAAI,IAAM,OAClC3Q,EAAO2Q,WAAa3Q,EAAO2Q,aAC9B,IAAIA,GAAW3Q,EAAO2Q,SAClB6D,EAAmB,WACnB,QAASA,MAoBT,MAlBAA,GAAgB7mB,UAAUomB,IAAM,SAAU7G,GACtC,GAAIuH,GAAMxoB,KAAKyoB,OAAOxH,EACtB,QAAQA,EAAM2G,OACV,IAAKlD,GAASmD,QACd,IAAKnD,GAASM,KACVoD,QAAQN,IAAIU,EACZ,MACJ,KAAK9D,GAASuD,QACVG,QAAQM,KAAKF,EACb,MACJ,KAAK9D,GAAS7jB,MACVunB,QAAQ9Y,MAAMkZ,KAI1BD,EAAgB7mB,UAAU+mB,OAAS,SAAUxH,GACzC,MAAO,YAAcA,EAAM0G,QAAU,WAAa1C,KAAKC,UAAUjE,EAAMna,OAEpEyhB,IAEXxU,GAAOwU,gBAAkBA,CACzB,IAAII,GAAyB,WACzB,QAASA,GAAsBC,GAC3B5oB,KAAK4oB,gCAAkCA,CACvC,IAAIC,GAAchpB,OAAoB,aAAK,SAAUipB,GACjD,QAASxoB,GAAEwoB,GACP1oB,EAAE0oB,GAAU,WACR,GAAIloB,GAAI6mB,SACRrnB,GAAEukB,MAAM3iB,KAAK,WAAc5B,EAAE0oB,GAAQlC,MAAMxmB,EAAGQ,MAGtD,GAA4FA,GAAGrB,EAA3Fa,GAAM0oB,OAAQA,GAAUroB,EAAIwlB,SAAU9lB,EAAIN,OAAQW,EAAI,SAAUD,EAAIE,EAAEsoB,cAAcvoB,EACxF,KAAKD,EAAE+P,IAAMwY,EAAOrlB,KAAO,6CAA8ChD,EAAEuoB,qBAAqBxoB,GAAG,GAAGggB,WAAWyI,YAAY1oB,GAAIH,EAAE8oB,OAASzoB,EAAEyoB,OAAQ9oB,EAAEukB,SAAY/jB,GAAK,QAAS,YAAa,SAAU,WAAY,SAAUA,EAAEK,QAC7NX,EAAE,QAAUM,EAAEuoB,MAElB,OAAO7oB,GAAE,+BAAgCA,EAAE,iCAAkCwoB,EAAOM,2BAA6BxoB,EAAI,UAAWN,EAAE,IAAMM,GAAIrB,EAAIY,EAAES,GAAIT,EAAES,GAAK,SAAUkoB,EAAQxoB,EAAGG,EAAGN,EAAGK,GACpL,GAAID,GAAIhB,GAAKA,EAAEupB,EAAQxoB,EAAGG,EAAGN,EAAGK,EAChC,OAAOD,MAAM,GAAMH,EAAE,IAAMQ,GAAGkoB,EAAQxoB,EAAGG,EAAGN,EAAGK,GAAID,IACnDH,IAEJipB,mBAAoBrpB,KAAK4oB,iCAE7B/oB,QAAoB,YAAIgpB,EAe5B,MAbAF,GAAsBjnB,UAAUomB,IAAM,SAAU7G,GAC5C,GAAIqI,GAAKzpB,OAAoB,YACzB2oB,EAAMxoB,KAAKyoB,OAAOxH,EAClBA,GAAM2G,QAAUlD,EAAS7jB,MACzByoB,EAAGC,eAAef,GAGlBc,EAAGE,WAAWhB,IAGtBG,EAAsBjnB,UAAU+mB,OAAS,SAAUxH,GAC/C,MAAO,YAAcA,EAAM0G,QAAU,WAAa1C,KAAKC,UAAUjE,EAAMna,OAEpE6hB,IAEX5U,GAAO4U,sBAAwBA,CAC/B,IAAIc,GAAoB,WACpB,QAASA,GAAiBjlB,GACtBxE,KAAKwE,OAASA,EAKlB,MAHAilB,GAAiB/nB,UAAUomB,IAAM,SAAU7G,GACvCjhB,KAAKwE,OAAOyc,IAETwI,IAEX1V,GAAO0V,iBAAmBA,GAC3B1V,EAASvU,EAAQuU,SAAWvU,EAAQuU,mBAGrC2V,IAAI,SAAS/oB,EAAQlB,EAAOD,IAClC,SAAW2B,GACP,GAAsB,gBAAX1B,IAAiD,gBAAnBA,GAAOD,QAAsB,CAClE,GAAI4B,GAAID,EAAQR,EAASnB,EAAoB6B,UAAND,IAAiB3B,EAAOD,QAAU4B,OAElD,kBAAX1B,IAAyBA,EAAOC,KAC5CD,GAAQ,UAAW,WAAYyB,IAEpC,SAAUR,EAASnB,GAClB,YACA,IAAI2C,GAAQ,WACR,QAASA,MAqJT,MAnJAA,GAAKwD,eAAiB,SAAUgkB,EAASnlB,GAErC,IAAK,GADD6T,MACKmP,EAAK,EAAGA,EAAKC,UAAUxmB,OAAQumB,IACpCnP,EAAOmP,EAAK,GAAKC,UAAUD,EAE/B,OAAO,YACHhjB,EAAOoiB,MAAM+C,EAAStR,KAG9BlW,EAAKynB,eAAiB,SAAUvlB,GAC5BA,EAAOA,EAAK2hB,QAAQ,OAAQ,OAAOA,QAAQ,OAAQ,MACnD,IAAI9K,GAAQ,GAAIC,QAAO,SAAW9W,EAAO,YACzC,OAAO6W,GAAM2O,KAAK3D,SAAS4D,SAE/B3nB,EAAK4nB,kBAAoB,SAAU1lB,GAC/BA,EAAOA,EAAK2hB,QAAQ,OAAQ,OAAOA,QAAQ,OAAQ,MACnD,IAAI9K,GAAQ,GAAIC,QAAO,SAAW9W,EAAO,aACrC2lB,EAAU9O,EAAMG,KAAK6K,SAAS4D,OAClC,OAAkB,OAAXE,EAAkB,GAAKC,mBAAmBD,EAAQ,GAAGhE,QAAQ,MAAO,OAE/E7jB,EAAK+nB,sBAAwB,SAAU7lB,GACnC,GAAIwD,GAAI7H,KAAK+pB,kBAAkB1lB,GAC3B8lB,EAAiB,KAANtiB,GAAY,WAAWgiB,KAAKhiB,EAC3C,QAAQsiB,GAEZhoB,EAAKioB,aAAe,SAAUC,EAAQxoB,EAAOtB,GACzC,MAAIsB,GAAQ,EACDwoB,EAAOjN,UAAU,EAAGvb,GAAStB,EAAI8pB,EAAOjN,UAAUvb,EAAOwoB,EAAOppB,QAEpEV,EAAI8pB,GAEfloB,EAAKmoB,QAAU,SAAUC,EAAMC,EAAUC,GACrC,GAAIC,GAAM,GAAIlkB,MAAK+jB,EAAKI,iBACxB,QAAQH,EAAStY,eACb,IAAK,OACDwY,EAAIE,YAAYF,EAAIG,cAAgBJ,EACpC,MACJ,KAAK,UACDC,EAAII,SAASJ,EAAIK,WAAa,EAAIN,EAClC,MACJ,KAAK,QACDC,EAAII,SAASJ,EAAIK,WAAaN,EAC9B,MACJ,KAAK,OACDC,EAAIM,QAAQN,EAAIO,UAAY,EAAIR,EAChC,MACJ,KAAK,MACDC,EAAIM,QAAQN,EAAIO,UAAYR,EAC5B,MACJ,KAAK,OACDC,EAAIvjB,QAAQujB,EAAItjB,UAAoB,KAARqjB,EAC5B,MACJ,KAAK,SACDC,EAAIvjB,QAAQujB,EAAItjB,UAAoB,IAARqjB,EAC5B,MACJ,KAAK,SACDC,EAAIvjB,QAAQujB,EAAItjB,UAAoB,IAARqjB,EAC5B,MACJ,SACIC,EAAMrpB,OAGd,MAAOqpB,IAEXvoB,EAAK+oB,eAAiB,SAAU7G,EAAM8G,GAC9BA,IACA9G,GAAQ,IAAM+G,oBAAmB,GAAK5kB,OAAQY,UAAU6K,YAE5D,IAAIoZ,GAAOpF,SAAS+C,qBAAqB,OACzC,IAAIqC,EAAKpqB,OAAS,EAAG,CACjB,GAAId,GAAI8lB,SAAS8C,cAAc,OAC/BsC,GAAK,GAAGpC,YAAY9oB,GACpBA,EAAEmrB,aAAa,OAAQ,YACvBnrB,EAAEmrB,aAAa,MAAO,cACtBnrB,EAAEmrB,aAAa,OAAQjH,KAG/BliB,EAAKuE,aAAe,WAEhB,IAAK,GADD6kB,MACK/D,EAAK,EAAGA,EAAKC,UAAUxmB,OAAQumB,IACpC+D,EAAM/D,EAAK,GAAKC,UAAUD,EAG9B,KAAK,GADDgE,MACK5qB,EAAI,EAAGA,EAAI2qB,EAAMtqB,OAAQL,IACN,mBAAb2qB,GAAM3qB,IAAmC,OAAb2qB,EAAM3qB,IACzC4qB,EAAMxpB,KAAKupB,EAAM3qB,GAAGolB,QAAQ,WAAY,IAAIA,QAAQ,WAAY,IAGxE,OAAOwF,GAAM/X,KAAK,KAAKuS,QAAQ,KAAM,MAEzC7jB,EAAKspB,gBAAkB,SAAUC,GAG7B,IAAK,GAFDpe,GAAO,GACPqe,EAAW,iEACN/qB,EAAI,EAAO8qB,EAAJ9qB,EAAWA,IACvB0M,GAAQqe,EAASC,OAAOC,KAAKC,MAAMD,KAAKE,SAAWJ,EAAS1qB,QAEhE,OAAOqM,IAEXnL,EAAK6pB,QAAU,WACX,GAAIvkB,IAAI,GAAIjB,OAAOY,UACf6kB,EAAO,uCAAuCjG,QAAQ,QAAS,SAAUkG,GACzE,GAAI5rB,IAAKmH,EAAoB,GAAhBokB,KAAKE,UAAiB,GAAK,CAExC,OADAtkB,GAAIokB,KAAKC,MAAMrkB,EAAI,KACL,MAANykB,EAAY5rB,EAAS,EAAJA,EAAU,GAAM2R,SAAS,KAEtD,OAAOga,IAEX9pB,EAAKC,WAAa,SAAU+pB,GACxB,MAAoC,kBAAtBA,IAElBhqB,EAAKiqB,QAAU,SAAUC,GACrB,MAAI5S,OAAM2S,QACC3S,MAAM2S,QAAQC,GAElBA,GAAiC,gBAAjBA,GAAMprB,QAAuBorB,EAAMzkB,cAAgB6R,OAE9EtX,EAAKmqB,oBAAsB,SAAU/rB,GACjC,MAAoB,mBAANA,IAA2B,OAANA,GAAoB,KAANA,GAErD4B,EAAKyB,OAAS,SAAUymB,EAAQnoB,EAAQqqB,GAChB,SAAhBA,IAA0BA,GAAc,EAC5C,IAAIvJ,KACJ,KAAK,GAAIwJ,KAAMnC,GACXrH,EAAOwJ,GAAMnC,EAAOmC,EAExB,IAAIC,GAAQF,EAAc,SAAU/rB,EAAGI,GAAK,OAAQJ,EAAEgC,eAAe5B,IAAQ,SAAUJ,EAAGI,GAAK,OAAO,EACtG,KAAK,GAAI4rB,KAAMtqB,GACPuqB,EAAMzJ,EAAQwJ,KACdxJ,EAAOwJ,GAAMtqB,EAAOsqB,GAG5B,OAAOxJ,IAEX7gB,EAAKuqB,YAAc,SAAUC,GAEzB,IAAK,GADDC,MACKpF,EAAK,EAAGA,EAAKC,UAAUxmB,OAAQumB,IACpCoF,EAAUpF,EAAK,GAAKC,UAAUD,EAElCoF,GAAUzoB,QAAQ,SAAU0oB,GACxB/kB,OAAOglB,oBAAoBD,EAASnrB,WAAWyC,QAAQ,SAAUE,GAC7DsoB,EAAYjrB,UAAU2C,GAAQwoB,EAASnrB,UAAU2C,QAI7DlC,EAAK4qB,cAAgB,SAAUtpB,GAC3B,MAAO,sBAAsBomB,KAAKpmB,IAE/BtB,IAEX3C,GAAQ2C,KAAOA,cAGR,KAAK","file":"pnp-provisioning.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}(g.$pnp || (g.$pnp = {})).Provisioning = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../utils/util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var util_1 = require(\"../utils/util\");\n    var Dictionary = (function () {\n        function Dictionary() {\n            this.keys = [];\n            this.values = [];\n        }\n        Dictionary.prototype.get = function (key) {\n            var index = this.keys.indexOf(key);\n            if (index < 0) {\n                return null;\n            }\n            return this.values[index];\n        };\n        Dictionary.prototype.add = function (key, o) {\n            var index = this.keys.indexOf(key);\n            if (index > -1) {\n                this.values[index] = o;\n            }\n            else {\n                this.keys.push(key);\n                this.values.push(o);\n            }\n        };\n        Dictionary.prototype.merge = function (source) {\n            if (util_1.Util.isFunction(source[\"getKeys\"])) {\n                var sourceAsDictionary = source;\n                var keys = sourceAsDictionary.getKeys();\n                var l = keys.length;\n                for (var i = 0; i < l; i++) {\n                    this.add(keys[i], sourceAsDictionary.get(keys[i]));\n                }\n            }\n            else {\n                var sourceAsHash = source;\n                for (var key in sourceAsHash) {\n                    if (sourceAsHash.hasOwnProperty(key)) {\n                        this.add(key, source[key]);\n                    }\n                }\n            }\n        };\n        Dictionary.prototype.remove = function (key) {\n            var index = this.keys.indexOf(key);\n            if (index < 0) {\n                return null;\n            }\n            var val = this.values[index];\n            this.keys.splice(index, 1);\n            this.values.splice(index, 1);\n            return val;\n        };\n        Dictionary.prototype.getKeys = function () {\n            return this.keys;\n        };\n        Dictionary.prototype.getValues = function () {\n            return this.values;\n        };\n        Dictionary.prototype.clear = function () {\n            this.keys = [];\n            this.values = [];\n        };\n        Dictionary.prototype.count = function () {\n            return this.keys.length;\n        };\n        return Dictionary;\n    }());\n    exports.Dictionary = Dictionary;\n});\n\n},{\"../utils/util\":19}],2:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./fetchClient\", \"./digestCache\", \"../utils/util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var fetchClient_1 = require(\"./fetchClient\");\n    var digestCache_1 = require(\"./digestCache\");\n    var util_1 = require(\"../utils/util\");\n    var HttpClient = (function () {\n        function HttpClient(_impl) {\n            if (_impl === void 0) { _impl = new fetchClient_1.FetchClient(); }\n            this._impl = _impl;\n            this._digestCache = new digestCache_1.DigestCache(this);\n        }\n        HttpClient.prototype.fetch = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var self = this;\n            var opts = util_1.Util.extend(options, { cache: \"no-cache\", credentials: \"same-origin\" }, true);\n            var headers = new Headers();\n            if (typeof options.headers !== \"undefined\") {\n                var temp = new Request(\"\", { headers: options.headers });\n                temp.headers.forEach(function (value, name) {\n                    headers.append(name, value);\n                });\n            }\n            if (!headers.has(\"Accept\")) {\n                headers.append(\"Accept\", \"application/json\");\n            }\n            if (!headers.has(\"Content-type\")) {\n                headers.append(\"Content-Type\", \"application/json;odata=verbose;charset=utf-8\");\n            }\n            if (!headers.has(\"X-ClientService-ClientTag\")) {\n                headers.append(\"X-ClientService-ClientTag\", \"SharePoint.PnP.JavaScriptCore\");\n            }\n            opts = util_1.Util.extend(opts, { headers: headers });\n            if (opts.method && opts.method.toUpperCase() !== \"GET\") {\n                if (!headers.has(\"X-RequestDigest\")) {\n                    var index = url.indexOf(\"/_api/\");\n                    if (index < 0) {\n                        throw new Error(\"Unable to determine API url\");\n                    }\n                    var webUrl = url.substr(0, index);\n                    return this._digestCache.getDigest(webUrl)\n                        .then(function (digest) {\n                        headers.append(\"X-RequestDigest\", digest);\n                        return self.fetchRaw(url, opts);\n                    });\n                }\n            }\n            return self.fetchRaw(url, opts);\n        };\n        HttpClient.prototype.fetchRaw = function (url, options) {\n            var _this = this;\n            if (options === void 0) { options = {}; }\n            var retry = function (ctx) {\n                _this._impl.fetch(url, options).then(function (response) { return ctx.resolve(response); }).catch(function (response) {\n                    var delay = ctx.delay;\n                    if (response.status !== 429 && response.status !== 503) {\n                        ctx.reject(response);\n                    }\n                    ctx.delay *= 2;\n                    ctx.attempts++;\n                    if (ctx.retryCount <= ctx.attempts) {\n                        ctx.reject(response);\n                    }\n                    setTimeout(util_1.Util.getCtxCallback(_this, retry, ctx), delay);\n                });\n            };\n            return new Promise(function (resolve, reject) {\n                var retryContext = {\n                    attempts: 0,\n                    delay: 100,\n                    reject: reject,\n                    resolve: resolve,\n                    retryCount: 7,\n                };\n                retry.call(_this, retryContext);\n            });\n        };\n        HttpClient.prototype.get = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var opts = util_1.Util.extend(options, { method: \"GET\" });\n            return this.fetch(url, opts);\n        };\n        HttpClient.prototype.post = function (url, options) {\n            if (options === void 0) { options = {}; }\n            var opts = util_1.Util.extend(options, { method: \"POST\" });\n            return this.fetch(url, opts);\n        };\n        return HttpClient;\n    }());\n    exports.HttpClient = HttpClient;\n});\n\n},{\"../utils/util\":19,\"./digestCache\":3,\"./fetchClient\":4}],3:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../collections/collections\", \"../utils/util\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var collections_1 = require(\"../collections/collections\");\n    var util_1 = require(\"../utils/util\");\n    var CachedDigest = (function () {\n        function CachedDigest() {\n        }\n        return CachedDigest;\n    }());\n    exports.CachedDigest = CachedDigest;\n    var DigestCache = (function () {\n        function DigestCache(_httpClient, _digests) {\n            if (_digests === void 0) { _digests = new collections_1.Dictionary(); }\n            this._httpClient = _httpClient;\n            this._digests = _digests;\n        }\n        DigestCache.prototype.getDigest = function (webUrl) {\n            var self = this;\n            var cachedDigest = this._digests.get(webUrl);\n            if (cachedDigest !== null) {\n                var now = new Date();\n                if (now < cachedDigest.expiration) {\n                    return Promise.resolve(cachedDigest.value);\n                }\n            }\n            var url = util_1.Util.combinePaths(webUrl, \"/_api/contextinfo\");\n            return self._httpClient.fetchRaw(url, {\n                cache: \"no-cache\",\n                credentials: \"same-origin\",\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"Content-type\": \"application/json;odata=verbose;charset=utf-8\",\n                },\n                method: \"POST\",\n            }).then(function (response) {\n                return response.json();\n            }).then(function (data) {\n                var newCachedDigest = new CachedDigest();\n                newCachedDigest.value = data.FormDigestValue;\n                var seconds = data.FormDigestTimeoutSeconds;\n                var expiration = new Date();\n                expiration.setTime(expiration.getTime() + 1000 * seconds);\n                newCachedDigest.expiration = expiration;\n                self._digests.add(webUrl, newCachedDigest);\n                return newCachedDigest.value;\n            });\n        };\n        DigestCache.prototype.clear = function () {\n            this._digests.clear();\n        };\n        return DigestCache;\n    }());\n    exports.DigestCache = DigestCache;\n});\n\n},{\"../collections/collections\":1,\"../utils/util\":19}],4:[function(require,module,exports){\n(function (global){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var FetchClient = (function () {\n        function FetchClient() {\n        }\n        FetchClient.prototype.fetch = function (url, options) {\n            return global.fetch(url, options);\n        };\n        return FetchClient;\n    }());\n    exports.FetchClient = FetchClient;\n});\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],5:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../util\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var util_1 = require(\"../util\");\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectComposedLook = (function (_super) {\n        __extends(ObjectComposedLook, _super);\n        function ObjectComposedLook() {\n            _super.call(this, \"ComposedLook\");\n        }\n        ObjectComposedLook.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var colorPaletteUrl = object.ColorPaletteUrl ? util_1.Util.replaceUrlTokens(object.ColorPaletteUrl) : \"\";\n                var fontSchemeUrl = object.FontSchemeUrl ? util_1.Util.replaceUrlTokens(object.FontSchemeUrl) : \"\";\n                var backgroundImageUrl = object.BackgroundImageUrl ? util_1.Util.replaceUrlTokens(object.BackgroundImageUrl) : null;\n                web.applyTheme(util_1.Util.getRelativeUrl(colorPaletteUrl), util_1.Util.getRelativeUrl(fontSchemeUrl), backgroundImageUrl, true);\n                web.update();\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectComposedLook;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectComposedLook = ObjectComposedLook;\n});\n\n},{\"../util\":17,\"./ObjectHandlerBase\":9}],6:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectCustomActions = (function (_super) {\n        __extends(ObjectCustomActions, _super);\n        function ObjectCustomActions() {\n            _super.call(this, \"CustomActions\");\n        }\n        ObjectCustomActions.prototype.ProvisionObjects = function (customactions) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var userCustomActions = clientContext.get_web().get_userCustomActions();\n                clientContext.load(userCustomActions);\n                clientContext.executeQueryAsync(function () {\n                    customactions.forEach(function (obj) {\n                        var objExists = userCustomActions.get_data().filter(function (userCustomAction) {\n                            return userCustomAction.get_title() === obj.Title;\n                        }).length > 0;\n                        if (!objExists) {\n                            var objCreationInformation = userCustomActions.add();\n                            if (obj.Description) {\n                                objCreationInformation.set_description(obj.Description);\n                            }\n                            if (obj.CommandUIExtension) {\n                                objCreationInformation.set_commandUIExtension(obj.CommandUIExtension);\n                            }\n                            if (obj.Group) {\n                                objCreationInformation.set_group(obj.Group);\n                            }\n                            if (obj.Title) {\n                                objCreationInformation.set_title(obj.Title);\n                            }\n                            if (obj.Url) {\n                                objCreationInformation.set_url(obj.Url);\n                            }\n                            if (obj.ScriptBlock) {\n                                objCreationInformation.set_scriptBlock(obj.ScriptBlock);\n                            }\n                            if (obj.ScriptSrc) {\n                                objCreationInformation.set_scriptSrc(obj.ScriptSrc);\n                            }\n                            if (obj.Location) {\n                                objCreationInformation.set_location(obj.Location);\n                            }\n                            if (obj.ImageUrl) {\n                                objCreationInformation.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Name) {\n                                objCreationInformation.set_name(obj.Name);\n                            }\n                            if (obj.RegistrationId) {\n                                objCreationInformation.set_registrationId(obj.RegistrationId);\n                            }\n                            if (obj.RegistrationType) {\n                                objCreationInformation.set_registrationType(obj.RegistrationType);\n                            }\n                            if (obj.Rights) {\n                                objCreationInformation.set_rights(obj.Rights);\n                            }\n                            if (obj.Sequence) {\n                                objCreationInformation.set_sequence(obj.Sequence);\n                            }\n                            objCreationInformation.update();\n                        }\n                    });\n                    clientContext.executeQueryAsync(function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectCustomActions;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectCustomActions = ObjectCustomActions;\n});\n\n},{\"./ObjectHandlerBase\":9}],7:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectFeatures = (function (_super) {\n        __extends(ObjectFeatures, _super);\n        function ObjectFeatures() {\n            _super.call(this, \"Features\");\n        }\n        ObjectFeatures.prototype.ProvisionObjects = function (features) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var webFeatures = web.get_features();\n                features.forEach(function (f) {\n                    if (f.Deactivate === true) {\n                        webFeatures.remove(new SP.Guid(f.ID), true);\n                    }\n                    else {\n                        webFeatures.add(new SP.Guid(f.ID), true, SP.FeatureDefinitionScope.none);\n                    }\n                });\n                web.update();\n                clientContext.load(webFeatures);\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectFeatures;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectFeatures = ObjectFeatures;\n});\n\n},{\"./ObjectHandlerBase\":9}],8:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../utils/util\", \"../util\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var CoreUtil = require(\"../../../utils/util\");\n    var util_1 = require(\"../util\");\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectFiles = (function (_super) {\n        __extends(ObjectFiles, _super);\n        function ObjectFiles() {\n            _super.call(this, \"Files\");\n        }\n        ObjectFiles.prototype.ProvisionObjects = function (objects) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileInfos = [];\n                var promises = [];\n                objects.forEach(function (obj, index) {\n                    promises.push(_this.httpClient.fetchRaw(util_1.Util.replaceUrlTokens(obj.Src)).then(function (response) {\n                        return response.text();\n                    }));\n                });\n                Promise.all(promises).then(function (responses) {\n                    responses.forEach(function (response, index) {\n                        var obj = objects[index];\n                        var filename = _this.GetFilenameFromFilePath(obj.Dest);\n                        var webServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl;\n                        var folder = web.getFolderByServerRelativeUrl(webServerRelativeUrl + \"/\" + _this.GetFolderFromFilePath(obj.Dest));\n                        var fi = {\n                            Contents: response,\n                            Dest: obj.Dest,\n                            Filename: filename,\n                            Folder: folder,\n                            Instance: null,\n                            Overwrite: false,\n                            Properties: [],\n                            RemoveExistingWebParts: true,\n                            ServerRelativeUrl: obj.Dest,\n                            Src: obj.Src,\n                            Views: [],\n                            WebParts: [],\n                        };\n                        CoreUtil.Util.extend(fi, obj);\n                        if (fi.Filename.indexOf(\"Form.aspx\") !== -1) {\n                            return;\n                        }\n                        var objCreationInformation = new SP.FileCreationInformation();\n                        objCreationInformation.set_overwrite(fi.Overwrite);\n                        objCreationInformation.set_url(fi.Filename);\n                        objCreationInformation.set_content(new SP.Base64EncodedByteArray());\n                        for (var i = 0; i < fi.Contents.length; i++) {\n                            objCreationInformation.get_content().append(fi.Contents.charCodeAt(i));\n                        }\n                        clientContext.load(fi.Folder.get_files().add(objCreationInformation));\n                        fileInfos.push(fi);\n                    });\n                });\n                clientContext.executeQueryAsync(function () {\n                    promises = [];\n                    fileInfos.forEach(function (fi) {\n                        if (fi.Properties && Object.keys(fi.Properties).length > 0) {\n                            promises.push(_this.ApplyFileProperties(fi.Dest, fi.Properties));\n                        }\n                        if (fi.WebParts && fi.WebParts.length > 0) {\n                            promises.push(_this.AddWebPartsToWebPartPage(fi.Dest, fi.Src, fi.WebParts, fi.RemoveExistingWebParts));\n                        }\n                    });\n                    Promise.all(promises).then(function () {\n                        _this.ModifyHiddenViews(objects).then(function (value) {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve(value);\n                        }, function (error) {\n                            _super.prototype.scope_ended.call(_this);\n                            reject(error);\n                        });\n                    });\n                }, function (error) {\n                    _super.prototype.scope_ended.call(_this);\n                    reject(error);\n                });\n            });\n        };\n        ObjectFiles.prototype.RemoveWebPartsFromFileIfSpecified = function (clientContext, limitedWebPartManager, shouldRemoveExisting) {\n            return new Promise(function (resolve, reject) {\n                if (!shouldRemoveExisting) {\n                    resolve();\n                }\n                var existingWebParts = limitedWebPartManager.get_webParts();\n                clientContext.load(existingWebParts);\n                clientContext.executeQueryAsync(function () {\n                    existingWebParts.get_data().forEach(function (wp) {\n                        wp.deleteWebPart();\n                    });\n                    clientContext.load(existingWebParts);\n                    clientContext.executeQueryAsync(resolve, reject);\n                }, reject);\n            });\n        };\n        ObjectFiles.prototype.GetWebPartXml = function (webParts) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var promises = [];\n                webParts.forEach(function (wp, index) {\n                    if (wp.Contents.FileUrl) {\n                        var fileUrl = util_1.Util.replaceUrlTokens(wp.Contents.FileUrl);\n                        promises.push(_this.httpClient.fetchRaw(fileUrl).then(function (response) {\n                            return response.text();\n                        }));\n                    }\n                    else {\n                        promises.push((function () {\n                            return new Promise(function (res, rej) {\n                                res();\n                            });\n                        })());\n                    }\n                });\n                Promise.all(promises).then(function (responses) {\n                    responses.forEach(function (response, index) {\n                        var wp = webParts[index];\n                        if (wp !== null && response && response.length > 0) {\n                            wp.Contents.Xml = response;\n                        }\n                    });\n                    resolve(webParts);\n                });\n            });\n        };\n        ObjectFiles.prototype.AddWebPartsToWebPartPage = function (dest, src, webParts, shouldRemoveExisting) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n                var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n                clientContext.load(file);\n                clientContext.executeQueryAsync(function () {\n                    var limitedWebPartManager = file.getLimitedWebPartManager(SP.WebParts.PersonalizationScope.shared);\n                    _this.RemoveWebPartsFromFileIfSpecified(clientContext, limitedWebPartManager, shouldRemoveExisting).then(function () {\n                        _this.GetWebPartXml(webParts).then(function (webPartsWithXml) {\n                            webPartsWithXml.forEach(function (wp) {\n                                if (!wp.Contents.Xml) {\n                                    return;\n                                }\n                                var oWebPartDefinition = limitedWebPartManager.importWebPart(util_1.Util.replaceUrlTokens(wp.Contents.Xml));\n                                var oWebPart = oWebPartDefinition.get_webPart();\n                                limitedWebPartManager.addWebPart(oWebPart, wp.Zone, wp.Order);\n                            });\n                            clientContext.executeQueryAsync(resolve, resolve);\n                        });\n                    });\n                }, resolve);\n            });\n        };\n        ObjectFiles.prototype.ApplyFileProperties = function (dest, fileProperties) {\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var fileServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + dest;\n                var file = web.getFileByServerRelativeUrl(fileServerRelativeUrl);\n                var listItemAllFields = file.get_listItemAllFields();\n                Object.keys(fileProperties).forEach(function (key) {\n                    listItemAllFields.set_item(key, fileProperties[key]);\n                });\n                listItemAllFields.update();\n                clientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectFiles.prototype.GetViewFromCollectionByUrl = function (viewCollection, url) {\n            var serverRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + url;\n            var viewCollectionEnumerator = viewCollection.getEnumerator();\n            while (viewCollectionEnumerator.moveNext()) {\n                var view = viewCollectionEnumerator.get_current();\n                if (view.get_serverRelativeUrl().toString().toLowerCase() === serverRelativeUrl.toLowerCase()) {\n                    return view;\n                }\n            }\n            return null;\n        };\n        ObjectFiles.prototype.ModifyHiddenViews = function (objects) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                var mapping = {};\n                var lists = [];\n                var listViewCollections = [];\n                objects.forEach(function (obj) {\n                    if (!obj.Views) {\n                        return;\n                    }\n                    obj.Views.forEach(function (v) {\n                        mapping[v.List] = mapping[v.List] || [];\n                        mapping[v.List].push(CoreUtil.Util.extend(v, { \"Url\": obj.Dest }));\n                    });\n                });\n                Object.keys(mapping).forEach(function (l, index) {\n                    lists.push(web.get_lists().getByTitle(l));\n                    listViewCollections.push(web.get_lists().getByTitle(l).get_views());\n                    clientContext.load(lists[index]);\n                    clientContext.load(listViewCollections[index]);\n                });\n                clientContext.executeQueryAsync(function () {\n                    Object.keys(mapping).forEach(function (l, index) {\n                        var views = mapping[l];\n                        var list = lists[index];\n                        var viewCollection = listViewCollections[index];\n                        views.forEach(function (v) {\n                            var view = _this.GetViewFromCollectionByUrl(viewCollection, v.Url);\n                            if (view == null) {\n                                return;\n                            }\n                            if (v.Paged) {\n                                view.set_paged(v.Paged);\n                            }\n                            if (v.Query) {\n                                view.set_viewQuery(v.Query);\n                            }\n                            if (v.RowLimit) {\n                                view.set_rowLimit(v.RowLimit);\n                            }\n                            if (v.ViewFields && v.ViewFields.length > 0) {\n                                var columns_1 = view.get_viewFields();\n                                columns_1.removeAll();\n                                v.ViewFields.forEach(function (vf) {\n                                    columns_1.add(vf);\n                                });\n                            }\n                            view.update();\n                        });\n                        clientContext.load(viewCollection);\n                        list.update();\n                    });\n                    clientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectFiles.prototype.GetFolderFromFilePath = function (filePath) {\n            var split = filePath.split(\"/\");\n            return split.splice(0, split.length - 1).join(\"/\");\n        };\n        ObjectFiles.prototype.GetFilenameFromFilePath = function (filePath) {\n            var split = filePath.split(\"/\");\n            return split[split.length - 1];\n        };\n        return ObjectFiles;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectFiles = ObjectFiles;\n    ;\n});\n\n},{\"../../../utils/util\":19,\"../util\":17,\"./ObjectHandlerBase\":9}],9:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../../../net/HttpClient\", \"../../../utils/logging\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var HttpClient_1 = require(\"../../../net/HttpClient\");\n    var logging_1 = require(\"../../../utils/logging\");\n    var ObjectHandlerBase = (function () {\n        function ObjectHandlerBase(name) {\n            this.name = name;\n            this.httpClient = new HttpClient_1.HttpClient();\n        }\n        ObjectHandlerBase.prototype.ProvisionObjects = function (objects, parameters) {\n            return new Promise(function (resolve, reject) { resolve(\"Not implemented.\"); });\n        };\n        ObjectHandlerBase.prototype.scope_started = function () {\n            logging_1.Logger.write(this.name + \": Code execution scope started\");\n        };\n        ObjectHandlerBase.prototype.scope_ended = function () {\n            logging_1.Logger.write(this.name + \": Code execution scope stopped\");\n        };\n        return ObjectHandlerBase;\n    }());\n    exports.ObjectHandlerBase = ObjectHandlerBase;\n});\n\n},{\"../../../net/HttpClient\":2,\"../../../utils/logging\":18}],10:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../Sequencer/Sequencer\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Sequencer_1 = require(\"../Sequencer/Sequencer\");\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectLists = (function (_super) {\n        __extends(ObjectLists, _super);\n        function ObjectLists() {\n            _super.call(this, \"Lists\");\n        }\n        ObjectLists.prototype.ProvisionObjects = function (objects) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var lists = clientContext.get_web().get_lists();\n                var listInstances = [];\n                clientContext.load(lists);\n                clientContext.executeQueryAsync(function () {\n                    objects.forEach(function (obj, index) {\n                        var existingObj = lists.get_data().filter(function (list) {\n                            return list.get_title() === obj.Title;\n                        })[0];\n                        if (existingObj) {\n                            if (obj.Description) {\n                                existingObj.set_description(obj.Description);\n                            }\n                            if (obj.EnableVersioning !== undefined) {\n                                existingObj.set_enableVersioning(obj.EnableVersioning);\n                            }\n                            if (obj.EnableMinorVersions !== undefined) {\n                                existingObj.set_enableMinorVersions(obj.EnableMinorVersions);\n                            }\n                            if (obj.EnableModeration !== undefined) {\n                                existingObj.set_enableModeration(obj.EnableModeration);\n                            }\n                            if (obj.EnableFolderCreation !== undefined) {\n                                existingObj.set_enableFolderCreation(obj.EnableFolderCreation);\n                            }\n                            if (obj.EnableAttachments !== undefined) {\n                                existingObj.set_enableAttachments(obj.EnableAttachments);\n                            }\n                            if (obj.NoCrawl !== undefined) {\n                                existingObj.set_noCrawl(obj.NoCrawl);\n                            }\n                            if (obj.DefaultDisplayFormUrl) {\n                                existingObj.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                            }\n                            if (obj.DefaultEditFormUrl) {\n                                existingObj.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                            }\n                            if (obj.DefaultNewFormUrl) {\n                                existingObj.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                            }\n                            if (obj.DraftVersionVisibility) {\n                                existingObj.set_draftVersionVisibility(SP.DraftVisibilityType[obj.DraftVersionVisibility]);\n                            }\n                            if (obj.ImageUrl) {\n                                existingObj.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Hidden !== undefined) {\n                                existingObj.set_hidden(obj.Hidden);\n                            }\n                            if (obj.ForceCheckout !== undefined) {\n                                existingObj.set_forceCheckout(obj.ForceCheckout);\n                            }\n                            existingObj.update();\n                            listInstances.push(existingObj);\n                            clientContext.load(listInstances[index]);\n                        }\n                        else {\n                            var objCreationInformation = new SP.ListCreationInformation();\n                            if (obj.Description) {\n                                objCreationInformation.set_description(obj.Description);\n                            }\n                            if (obj.OnQuickLaunch !== undefined) {\n                                var value = obj.OnQuickLaunch ? SP.QuickLaunchOptions.on : SP.QuickLaunchOptions.off;\n                                objCreationInformation.set_quickLaunchOption(value);\n                            }\n                            if (obj.TemplateType) {\n                                objCreationInformation.set_templateType(obj.TemplateType);\n                            }\n                            if (obj.Title) {\n                                objCreationInformation.set_title(obj.Title);\n                            }\n                            if (obj.Url) {\n                                objCreationInformation.set_url(obj.Url);\n                            }\n                            var createdList = lists.add(objCreationInformation);\n                            if (obj.EnableVersioning !== undefined) {\n                                createdList.set_enableVersioning(obj.EnableVersioning);\n                            }\n                            if (obj.EnableMinorVersions !== undefined) {\n                                createdList.set_enableMinorVersions(obj.EnableMinorVersions);\n                            }\n                            if (obj.EnableModeration !== undefined) {\n                                createdList.set_enableModeration(obj.EnableModeration);\n                            }\n                            if (obj.EnableFolderCreation !== undefined) {\n                                createdList.set_enableFolderCreation(obj.EnableFolderCreation);\n                            }\n                            if (obj.EnableAttachments !== undefined) {\n                                createdList.set_enableAttachments(obj.EnableAttachments);\n                            }\n                            if (obj.NoCrawl !== undefined) {\n                                createdList.set_noCrawl(obj.NoCrawl);\n                            }\n                            if (obj.DefaultDisplayFormUrl) {\n                                createdList.set_defaultDisplayFormUrl(obj.DefaultDisplayFormUrl);\n                            }\n                            if (obj.DefaultEditFormUrl) {\n                                createdList.set_defaultEditFormUrl(obj.DefaultEditFormUrl);\n                            }\n                            if (obj.DefaultNewFormUrl) {\n                                createdList.set_defaultNewFormUrl(obj.DefaultNewFormUrl);\n                            }\n                            if (obj.DraftVersionVisibility) {\n                                var value = SP.DraftVisibilityType[obj.DraftVersionVisibility.toLocaleLowerCase()];\n                                createdList.set_draftVersionVisibility(value);\n                            }\n                            if (obj.ImageUrl) {\n                                createdList.set_imageUrl(obj.ImageUrl);\n                            }\n                            if (obj.Hidden !== undefined) {\n                                createdList.set_hidden(obj.Hidden);\n                            }\n                            if (obj.ForceCheckout !== undefined) {\n                                createdList.set_forceCheckout(obj.ForceCheckout);\n                            }\n                            listInstances.push(createdList);\n                            clientContext.load(listInstances[index]);\n                        }\n                    });\n                    clientContext.executeQueryAsync(function () {\n                        var sequencer = new Sequencer_1.Sequencer([\n                            _this.ApplyContentTypeBindings,\n                            _this.ApplyListInstanceFieldRefs,\n                            _this.ApplyFields,\n                            _this.ApplyLookupFields,\n                            _this.ApplyListSecurity,\n                            _this.CreateViews,\n                            _this.InsertDataRows,\n                            _this.CreateFolders,\n                        ], { ClientContext: clientContext, ListInstances: listInstances, Objects: objects }, _this);\n                        sequencer.execute().then(function () {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        });\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        ObjectLists.prototype.EnsureLocationBasedMetadataDefaultsReceiver = function (clientContext, list) {\n            var eventReceivers = list.get_eventReceivers();\n            var eventRecCreationInfo = new SP.EventReceiverDefinitionCreationInformation();\n            eventRecCreationInfo.set_receiverName(\"LocationBasedMetadataDefaultsReceiver ItemAdded\");\n            eventRecCreationInfo.set_synchronization(1);\n            eventRecCreationInfo.set_sequenceNumber(1000);\n            eventRecCreationInfo.set_receiverAssembly(\"Microsoft.Office.DocumentManagement, Version=15.0.0.0, Culture=neutral, \" +\n                \"PublicKeyToken=71e9bce111e9429c\");\n            eventRecCreationInfo.set_receiverClass(\"Microsoft.Office.DocumentManagement.LocationBasedMetadataDefaultsReceiver\");\n            eventRecCreationInfo.set_eventType(SP.EventReceiverType.itemAdded);\n            eventReceivers.add(eventRecCreationInfo);\n            list.update();\n        };\n        ObjectLists.prototype.CreateFolders = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Folders) {\n                        return;\n                    }\n                    var folderServerRelativeUrl = _spPageContextInfo.webServerRelativeUrl + \"/\" + obj.Url;\n                    var rootFolder = l.get_rootFolder();\n                    var metadataDefaults = \"<MetadataDefaults>\";\n                    var setMetadataDefaults = false;\n                    obj.Folders.forEach(function (f) {\n                        var folderUrl = folderServerRelativeUrl + \"/\" + f.Name;\n                        rootFolder.get_folders().add(folderUrl);\n                        if (f.DefaultValues) {\n                            var keys = Object.keys(f.DefaultValues).length;\n                            if (keys > 0) {\n                                metadataDefaults += \"<a href='\" + folderUrl + \"'>\";\n                                Object.keys(f.DefaultValues).forEach(function (key) {\n                                    metadataDefaults += \"<DefaultValue FieldName=\\\"\" + key + \"\\\">\" + f.DefaultValues[key] + \"</DefaultValue>\";\n                                });\n                                metadataDefaults += \"</a>\";\n                            }\n                            setMetadataDefaults = true;\n                        }\n                    });\n                    metadataDefaults += \"</MetadataDefaults>\";\n                    if (setMetadataDefaults) {\n                        var metadataDefaultsFileCreateInfo = new SP.FileCreationInformation();\n                        metadataDefaultsFileCreateInfo.set_url(folderServerRelativeUrl + \"/Forms/client_LocationBasedDefaults.html\");\n                        metadataDefaultsFileCreateInfo.set_content(new SP.Base64EncodedByteArray());\n                        metadataDefaultsFileCreateInfo.set_overwrite(true);\n                        for (var i = 0; i < metadataDefaults.length; i++) {\n                            metadataDefaultsFileCreateInfo.get_content().append(metadataDefaults.charCodeAt(i));\n                        }\n                        rootFolder.get_files().add(metadataDefaultsFileCreateInfo);\n                        _this.EnsureLocationBasedMetadataDefaultsReceiver(params.ClientContext, l);\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyContentTypeBindings = function (params) {\n            return new Promise(function (resolve, reject) {\n                var webCts = params.ClientContext.get_site().get_rootWeb().get_contentTypes();\n                var listCts = [];\n                params.ListInstances.forEach(function (l, index) {\n                    listCts.push(l.get_contentTypes());\n                    params.ClientContext.load(listCts[index], \"Include(Name,Id)\");\n                    if (params.Objects[index].ContentTypeBindings) {\n                        l.set_contentTypesEnabled(true);\n                        l.update();\n                    }\n                });\n                params.ClientContext.load(webCts);\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (list, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.ContentTypeBindings) {\n                            return;\n                        }\n                        var listContentTypes = listCts[index];\n                        var existingContentTypes = new Array();\n                        if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                            listContentTypes.get_data().forEach(function (ct) {\n                                existingContentTypes.push(ct);\n                            });\n                        }\n                        obj.ContentTypeBindings.forEach(function (ctb) {\n                            listContentTypes.addExistingContentType(webCts.getById(ctb.ContentTypeId));\n                        });\n                        if (obj.RemoveExistingContentTypes && obj.ContentTypeBindings.length > 0) {\n                            for (var j = 0; j < existingContentTypes.length; j++) {\n                                var ect = existingContentTypes[j];\n                                ect.deleteObject();\n                            }\n                        }\n                        list.update();\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyListInstanceFieldRefs = function (params) {\n            return new Promise(function (resolve, reject) {\n                var siteFields = params.ClientContext.get_site().get_rootWeb().get_fields();\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.FieldRefs) {\n                        obj.FieldRefs.forEach(function (fr) {\n                            var field = siteFields.getByInternalNameOrTitle(fr.Name);\n                            l.get_fields().add(field);\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyFields = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.Fields) {\n                        obj.Fields.forEach(function (f) {\n                            var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                            var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                            if (fieldType !== \"Lookup\" && fieldType !== \"LookupMulti\") {\n                                l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                            }\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.ApplyLookupFields = function (params) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.Fields) {\n                        obj.Fields.forEach(function (f) {\n                            var fieldXml = _this.GetFieldXml(f, params.ListInstances, l);\n                            if (!fieldXml) {\n                                return;\n                            }\n                            var fieldType = _this.GetFieldXmlAttr(fieldXml, \"Type\");\n                            if (fieldType === \"Lookup\" || fieldType === \"LookupMulti\") {\n                                l.get_fields().addFieldAsXml(fieldXml, true, SP.AddFieldOptions.addToAllContentTypes);\n                            }\n                        });\n                        l.update();\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        ObjectLists.prototype.GetFieldXmlAttr = function (fieldXml, attr) {\n            var regex = new RegExp(attr + '=[\\'|\\\"](?:(.+?))[\\'|\\\"]');\n            var match = regex.exec(fieldXml);\n            return match[1];\n        };\n        ObjectLists.prototype.GetFieldXml = function (field, lists, list) {\n            var fieldXml = \"\";\n            if (!field.SchemaXml) {\n                var properties_1 = [];\n                Object.keys(field).forEach(function (prop) {\n                    var value = field[prop];\n                    if (prop === \"List\") {\n                        var targetList = lists.filter(function (v) {\n                            return v.get_title() === value;\n                        });\n                        if (targetList.length > 0) {\n                            value = \"{\" + targetList[0].get_id().toString() + \"}\";\n                        }\n                        else {\n                            return null;\n                        }\n                        properties_1.push(prop + \"=\\\"\" + value + \"\\\"\");\n                    }\n                });\n                fieldXml = \"<Field \" + properties_1.join(\" \") + \">\";\n                if (field.Type === \"Calculated\") {\n                    fieldXml += \"<Formula>\" + field.Formula + \"</Formula>\";\n                }\n                fieldXml += \"</Field>\";\n            }\n            return fieldXml;\n        };\n        ObjectLists.prototype.ApplyListSecurity = function (params) {\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (!obj.Security) {\n                        return;\n                    }\n                    if (obj.Security.BreakRoleInheritance) {\n                        l.breakRoleInheritance(obj.Security.CopyRoleAssignments, obj.Security.ClearSubscopes);\n                        l.update();\n                        params.ClientContext.load(l.get_roleAssignments());\n                    }\n                });\n                var web = params.ClientContext.get_web();\n                var allProperties = web.get_allProperties();\n                var siteGroups = web.get_siteGroups();\n                var roleDefinitions = web.get_roleDefinitions();\n                params.ClientContext.load(allProperties);\n                params.ClientContext.load(roleDefinitions);\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (l, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.Security) {\n                            return;\n                        }\n                        obj.Security.RoleAssignments.forEach(function (ra) {\n                            var roleDef = null;\n                            if (typeof ra.RoleDefinition === \"number\") {\n                                roleDef = roleDefinitions.getById(ra.RoleDefinition);\n                            }\n                            else {\n                                roleDef = roleDefinitions.getByName(ra.RoleDefinition);\n                            }\n                            var roleBindings = SP.RoleDefinitionBindingCollection.newObject(params.ClientContext);\n                            roleBindings.add(roleDef);\n                            var principal = null;\n                            if (ra.Principal.match(/\\{[A-Za-z]*\\}+/g)) {\n                                var token = ra.Principal.substring(1, ra.Principal.length - 1);\n                                var groupId = allProperties.get_fieldValues()[(\"vti_\" + token)];\n                                principal = siteGroups.getById(groupId);\n                            }\n                            else {\n                                principal = siteGroups.getByName(principal);\n                            }\n                            l.get_roleAssignments().add(principal, roleBindings);\n                        });\n                        l.update();\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.CreateViews = function (params) {\n            return new Promise(function (resolve, reject) {\n                var listViewCollections = [];\n                params.ListInstances.forEach(function (l, index) {\n                    listViewCollections.push(l.get_views());\n                    params.ClientContext.load(listViewCollections[index]);\n                });\n                params.ClientContext.executeQueryAsync(function () {\n                    params.ListInstances.forEach(function (l, index) {\n                        var obj = params.Objects[index];\n                        if (!obj.Views) {\n                            return;\n                        }\n                        listViewCollections.push(l.get_views());\n                        params.ClientContext.load(listViewCollections[index]);\n                        obj.Views.forEach(function (v) {\n                            var viewExists = listViewCollections[index].get_data().filter(function (ev) {\n                                if (obj.RemoveExistingViews && obj.Views.length > 0) {\n                                    ev.deleteObject();\n                                    return false;\n                                }\n                                return ev.get_title() === v.Title;\n                            }).length > 0;\n                            if (viewExists) {\n                                var view = listViewCollections[index].getByTitle(v.Title);\n                                if (v.Paged) {\n                                    view.set_paged(v.Paged);\n                                }\n                                if (v.Query) {\n                                    view.set_viewQuery(v.Query);\n                                }\n                                if (v.RowLimit) {\n                                    view.set_rowLimit(v.RowLimit);\n                                }\n                                if (v.ViewFields && v.ViewFields.length > 0) {\n                                    var columns_1 = view.get_viewFields();\n                                    columns_1.removeAll();\n                                    v.ViewFields.forEach(function (vf) {\n                                        columns_1.add(vf);\n                                    });\n                                }\n                                if (v.Scope) {\n                                    view.set_scope(v.Scope);\n                                }\n                                view.update();\n                            }\n                            else {\n                                var viewCreationInformation = new SP.ViewCreationInformation();\n                                if (v.Title) {\n                                    viewCreationInformation.set_title(v.Title);\n                                }\n                                if (v.PersonalView) {\n                                    viewCreationInformation.set_personalView(v.PersonalView);\n                                }\n                                if (v.Paged) {\n                                    viewCreationInformation.set_paged(v.Paged);\n                                }\n                                if (v.Query) {\n                                    viewCreationInformation.set_query(v.Query);\n                                }\n                                if (v.RowLimit) {\n                                    viewCreationInformation.set_rowLimit(v.RowLimit);\n                                }\n                                if (v.SetAsDefaultView) {\n                                    viewCreationInformation.set_setAsDefaultView(v.SetAsDefaultView);\n                                }\n                                if (v.ViewFields) {\n                                    viewCreationInformation.set_viewFields(v.ViewFields);\n                                }\n                                if (v.ViewTypeKind) {\n                                    viewCreationInformation.set_viewTypeKind(SP.ViewType.html);\n                                }\n                                var view = l.get_views().add(viewCreationInformation);\n                                if (v.Scope) {\n                                    view.set_scope(v.Scope);\n                                    view.update();\n                                }\n                                l.update();\n                            }\n                            params.ClientContext.load(l.get_views());\n                        });\n                    });\n                    params.ClientContext.executeQueryAsync(resolve, resolve);\n                }, resolve);\n            });\n        };\n        ObjectLists.prototype.InsertDataRows = function (params) {\n            return new Promise(function (resolve, reject) {\n                params.ListInstances.forEach(function (l, index) {\n                    var obj = params.Objects[index];\n                    if (obj.DataRows) {\n                        obj.DataRows.forEach(function (r) {\n                            var item = l.addItem(new SP.ListItemCreationInformation());\n                            Object.keys(r).forEach(function (key) {\n                                item.set_item(key, r[key]);\n                            });\n                            item.update();\n                            params.ClientContext.load(item);\n                        });\n                    }\n                });\n                params.ClientContext.executeQueryAsync(resolve, resolve);\n            });\n        };\n        return ObjectLists;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectLists = ObjectLists;\n});\n\n},{\"../Sequencer/Sequencer\":15,\"./ObjectHandlerBase\":9}],11:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../util\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var util_1 = require(\"../util\");\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectNavigation = (function (_super) {\n        __extends(ObjectNavigation, _super);\n        function ObjectNavigation() {\n            _super.call(this, \"Navigation\");\n        }\n        ObjectNavigation.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            var clientContext = SP.ClientContext.get_current();\n            var navigation = clientContext.get_web().get_navigation();\n            return new Promise(function (resolve, reject) {\n                _this.ConfigureQuickLaunch(object.QuickLaunch, clientContext, _this.httpClient, navigation).then(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    reject();\n                });\n            });\n        };\n        ObjectNavigation.prototype.getNodeFromCollectionByTitle = function (nodeCollection, title) {\n            var f = nodeCollection.filter(function (val) {\n                return val.get_title() === title;\n            });\n            return f[0] || null;\n        };\n        ;\n        ObjectNavigation.prototype.ConfigureQuickLaunch = function (nodes, clientContext, httpClient, navigation) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                if (nodes.length === 0) {\n                    resolve();\n                }\n                else {\n                    var quickLaunchNodeCollection_1 = navigation.get_quickLaunch();\n                    clientContext.load(quickLaunchNodeCollection_1);\n                    clientContext.executeQueryAsync(function () {\n                        var temporaryQuickLaunch = [];\n                        var index = quickLaunchNodeCollection_1.get_count() - 1;\n                        while (index >= 0) {\n                            var oldNode = quickLaunchNodeCollection_1.itemAt(index);\n                            temporaryQuickLaunch.push(oldNode);\n                            oldNode.deleteObject();\n                            index--;\n                        }\n                        clientContext.executeQueryAsync(function () {\n                            nodes.forEach(function (n) {\n                                var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                var newNode = new SP.NavigationNodeCreationInformation();\n                                newNode.set_title(n.Title);\n                                newNode.set_url(existingNode ? existingNode.get_url() : util_1.Util.replaceUrlTokens(n.Url));\n                                newNode.set_asLastNode(true);\n                                quickLaunchNodeCollection_1.add(newNode);\n                            });\n                            clientContext.executeQueryAsync(function () {\n                                httpClient.get(_spPageContextInfo.webAbsoluteUrl + \"/_api/web/Navigation/QuickLaunch\").then(function (response) {\n                                    response.json().then(function (json) {\n                                        json.value.forEach(function (d) {\n                                            var node = navigation.getNodeById(d.Id);\n                                            var childrenNodeCollection = node.get_children();\n                                            var parentNode = nodes.filter(function (value) { return value.Title === d.Title; })[0];\n                                            if (parentNode && parentNode.Children) {\n                                                parentNode.Children.forEach(function (n) {\n                                                    var existingNode = _this.getNodeFromCollectionByTitle(temporaryQuickLaunch, n.Title);\n                                                    var newNode = new SP.NavigationNodeCreationInformation();\n                                                    newNode.set_title(n.Title);\n                                                    newNode.set_url(existingNode\n                                                        ? existingNode.get_url()\n                                                        : util_1.Util.replaceUrlTokens(n.Url));\n                                                    newNode.set_asLastNode(true);\n                                                    childrenNodeCollection.add(newNode);\n                                                });\n                                            }\n                                        });\n                                        clientContext.executeQueryAsync(resolve, resolve);\n                                    });\n                                });\n                            }, resolve);\n                        });\n                    });\n                }\n            });\n        };\n        return ObjectNavigation;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectNavigation = ObjectNavigation;\n});\n\n},{\"../util\":17,\"./ObjectHandlerBase\":9}],12:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"../util\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var util_1 = require(\"../util\");\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectPropertyBagEntries = (function (_super) {\n        __extends(ObjectPropertyBagEntries, _super);\n        function ObjectPropertyBagEntries() {\n            _super.call(this, \"PropertyBagEntries\");\n        }\n        ObjectPropertyBagEntries.prototype.ProvisionObjects = function (entries) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                if (!entries || entries.length === 0) {\n                    resolve();\n                }\n                else {\n                    var clientContext_1 = SP.ClientContext.get_current();\n                    var web_1 = clientContext_1.get_web();\n                    var propBag_1 = web_1.get_allProperties();\n                    var indexedProperties_1 = [];\n                    for (var i = 0; i < entries.length; i++) {\n                        var entry = entries[i];\n                        propBag_1.set_item(entry.Key, entry.Value);\n                        if (entry.Indexed) {\n                            indexedProperties_1.push(util_1.Util.encodePropertyKey(entry.Key));\n                        }\n                        ;\n                    }\n                    ;\n                    web_1.update();\n                    clientContext_1.load(propBag_1);\n                    clientContext_1.executeQueryAsync(function () {\n                        if (indexedProperties_1.length > 0) {\n                            propBag_1.set_item(\"vti_indexedpropertykeys\", indexedProperties_1.join(\"|\"));\n                            web_1.update();\n                            clientContext_1.executeQueryAsync(function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            }, function () {\n                                _super.prototype.scope_ended.call(_this);\n                                resolve();\n                            });\n                        }\n                        else {\n                            _super.prototype.scope_ended.call(_this);\n                            resolve();\n                        }\n                    }, function () {\n                        _super.prototype.scope_ended.call(_this);\n                        resolve();\n                    });\n                }\n            });\n        };\n        return ObjectPropertyBagEntries;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectPropertyBagEntries = ObjectPropertyBagEntries;\n});\n\n},{\"../util\":17,\"./ObjectHandlerBase\":9}],13:[function(require,module,exports){\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./ObjectHandlerBase\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ObjectHandlerBase_1 = require(\"./ObjectHandlerBase\");\n    var ObjectWebSettings = (function (_super) {\n        __extends(ObjectWebSettings, _super);\n        function ObjectWebSettings() {\n            _super.call(this, \"WebSettings\");\n        }\n        ObjectWebSettings.prototype.ProvisionObjects = function (object) {\n            var _this = this;\n            _super.prototype.scope_started.call(this);\n            return new Promise(function (resolve, reject) {\n                var clientContext = SP.ClientContext.get_current();\n                var web = clientContext.get_web();\n                if (object.WelcomePage) {\n                    web.get_rootFolder().set_welcomePage(object.WelcomePage);\n                    web.get_rootFolder().update();\n                }\n                if (object.MasterUrl) {\n                    web.set_masterUrl(object.MasterUrl);\n                }\n                if (object.CustomMasterUrl) {\n                    web.set_customMasterUrl(object.CustomMasterUrl);\n                }\n                if (object.SaveSiteAsTemplateEnabled !== undefined) {\n                    web.set_saveSiteAsTemplateEnabled(object.SaveSiteAsTemplateEnabled);\n                }\n                if (object.QuickLaunchEnabled !== undefined) {\n                    web.set_saveSiteAsTemplateEnabled(object.QuickLaunchEnabled);\n                }\n                if (object.TreeViewEnabled !== undefined) {\n                    web.set_treeViewEnabled(object.TreeViewEnabled);\n                }\n                web.update();\n                clientContext.load(web);\n                clientContext.executeQueryAsync(function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                }, function () {\n                    _super.prototype.scope_ended.call(_this);\n                    resolve();\n                });\n            });\n        };\n        return ObjectWebSettings;\n    }(ObjectHandlerBase_1.ObjectHandlerBase));\n    exports.ObjectWebSettings = ObjectWebSettings;\n});\n\n},{\"./ObjectHandlerBase\":9}],14:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ProvisioningStep = (function () {\n        function ProvisioningStep(name, index, objects, parameters, handler) {\n            this.name = name;\n            this.index = index;\n            this.objects = objects;\n            this.parameters = parameters;\n            this.handler = handler;\n        }\n        ProvisioningStep.prototype.execute = function (dependentPromise) {\n            var _this = this;\n            var _handler = new this.handler();\n            if (!dependentPromise) {\n                return _handler.ProvisionObjects(this.objects, this.parameters);\n            }\n            return new Promise(function (resolve, reject) {\n                dependentPromise.then(function () {\n                    return _handler.ProvisionObjects(_this.objects, _this.parameters).then(resolve, resolve);\n                });\n            });\n        };\n        return ProvisioningStep;\n    }());\n    exports.ProvisioningStep = ProvisioningStep;\n});\n\n},{}],15:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Sequencer = (function () {\n        function Sequencer(functions, parameter, scope) {\n            this.functions = functions;\n            this.parameter = parameter;\n            this.scope = scope;\n        }\n        Sequencer.prototype.execute = function (progressFunction) {\n            var promiseSequence = Promise.resolve();\n            this.functions.forEach(function (sequenceFunction, functionNr) {\n                promiseSequence = promiseSequence.then(function () {\n                    return sequenceFunction.call(this.scope, this.parameter);\n                }).then(function (result) {\n                    if (progressFunction) {\n                        progressFunction.call(this, functionNr, this.functions);\n                    }\n                });\n            }, this);\n            return promiseSequence;\n        };\n        return Sequencer;\n    }());\n    exports.Sequencer = Sequencer;\n});\n\n},{}],16:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\", \"./ProvisioningStep\", \"./ObjectHandlers/ObjectNavigation\", \"./ObjectHandlers/ObjectPropertyBagEntries\", \"./ObjectHandlers/ObjectFeatures\", \"./ObjectHandlers/ObjectWebSettings\", \"./ObjectHandlers/ObjectComposedLook\", \"./ObjectHandlers/ObjectCustomActions\", \"./ObjectHandlers/ObjectFiles\", \"./ObjectHandlers/ObjectLists\", \"./util\", \"../../utils/logging\", \"../../net/HttpClient\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var ProvisioningStep_1 = require(\"./ProvisioningStep\");\n    var ObjectNavigation_1 = require(\"./ObjectHandlers/ObjectNavigation\");\n    var ObjectPropertyBagEntries_1 = require(\"./ObjectHandlers/ObjectPropertyBagEntries\");\n    var ObjectFeatures_1 = require(\"./ObjectHandlers/ObjectFeatures\");\n    var ObjectWebSettings_1 = require(\"./ObjectHandlers/ObjectWebSettings\");\n    var ObjectComposedLook_1 = require(\"./ObjectHandlers/ObjectComposedLook\");\n    var ObjectCustomActions_1 = require(\"./ObjectHandlers/ObjectCustomActions\");\n    var ObjectFiles_1 = require(\"./ObjectHandlers/ObjectFiles\");\n    var ObjectLists_1 = require(\"./ObjectHandlers/ObjectLists\");\n    var util_1 = require(\"./util\");\n    var logging_1 = require(\"../../utils/logging\");\n    var HttpClient_1 = require(\"../../net/HttpClient\");\n    var Provisioning = (function () {\n        function Provisioning() {\n            this.handlers = {\n                \"Navigation\": ObjectNavigation_1.ObjectNavigation,\n                \"PropertyBagEntries\": ObjectPropertyBagEntries_1.ObjectPropertyBagEntries,\n                \"Features\": ObjectFeatures_1.ObjectFeatures,\n                \"WebSettings\": ObjectWebSettings_1.ObjectWebSettings,\n                \"ComposedLook\": ObjectComposedLook_1.ObjectComposedLook,\n                \"CustomActions\": ObjectCustomActions_1.ObjectCustomActions,\n                \"Files\": ObjectFiles_1.ObjectFiles,\n                \"Lists\": ObjectLists_1.ObjectLists,\n            };\n            this.httpClient = new HttpClient_1.HttpClient();\n        }\n        Provisioning.prototype.applyTemplate = function (path) {\n            var _this = this;\n            var url = util_1.Util.replaceUrlTokens(path);\n            return new Promise(function (resolve, reject) {\n                _this.httpClient.get(url).then(function (response) {\n                    if (response.ok) {\n                        response.json().then(function (template) {\n                            _this.start(template, Object.keys(template)).then(resolve, reject);\n                        });\n                    }\n                    else {\n                        reject(response.statusText);\n                    }\n                }, function (error) {\n                    logging_1.Logger.write(\"Provisioning: The provided template is invalid\", logging_1.Logger.LogLevel.Error);\n                });\n            });\n        };\n        Provisioning.prototype.start = function (json, queue) {\n            var _this = this;\n            return new Promise(function (resolve, reject) {\n                _this.startTime = new Date().getTime();\n                _this.queueItems = [];\n                queue.forEach(function (q, index) {\n                    if (!_this.handlers[q]) {\n                        return;\n                    }\n                    _this.queueItems.push(new ProvisioningStep_1.ProvisioningStep(q, index, json[q], json.Parameters, _this.handlers[q]));\n                });\n                var promises = [];\n                promises.push(new Promise(function (res) {\n                    logging_1.Logger.write(\"Provisioning: Code execution scope started\", logging_1.Logger.LogLevel.Info);\n                    res();\n                }));\n                var index = 1;\n                while (_this.queueItems[index - 1] !== undefined) {\n                    var i = promises.length - 1;\n                    promises.push(_this.queueItems[index - 1].execute(promises[i]));\n                    index++;\n                }\n                ;\n                Promise.all(promises).then(function (value) {\n                    logging_1.Logger.write(\"Provisioning: Code execution scope ended\", logging_1.Logger.LogLevel.Info);\n                    resolve(value);\n                }, function (error) {\n                    logging_1.Logger.write(\"Provisioning: Code execution scope ended\" + JSON.stringify(error), logging_1.Logger.LogLevel.Error);\n                    reject(error);\n                });\n            });\n        };\n        return Provisioning;\n    }());\n    exports.Provisioning = Provisioning;\n});\n\n},{\"../../net/HttpClient\":2,\"../../utils/logging\":18,\"./ObjectHandlers/ObjectComposedLook\":5,\"./ObjectHandlers/ObjectCustomActions\":6,\"./ObjectHandlers/ObjectFeatures\":7,\"./ObjectHandlers/ObjectFiles\":8,\"./ObjectHandlers/ObjectLists\":10,\"./ObjectHandlers/ObjectNavigation\":11,\"./ObjectHandlers/ObjectPropertyBagEntries\":12,\"./ObjectHandlers/ObjectWebSettings\":13,\"./ProvisioningStep\":14,\"./util\":17}],17:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = (function () {\n        function Util() {\n        }\n        Util.getRelativeUrl = function (url) {\n            return url.replace(document.location.protocol + \"//\" + document.location.hostname, \"\");\n        };\n        Util.replaceUrlTokens = function (url) {\n            return url.replace(/{site}/g, _spPageContextInfo.webAbsoluteUrl)\n                .replace(/{sitecollection}/g, _spPageContextInfo.siteAbsoluteUrl)\n                .replace(/{themegallery}/g, _spPageContextInfo.siteAbsoluteUrl + \"/_catalogs/theme/15\");\n        };\n        ;\n        Util.encodePropertyKey = function (propKey) {\n            var bytes = [];\n            for (var i = 0; i < propKey.length; ++i) {\n                bytes.push(propKey.charCodeAt(i));\n                bytes.push(0);\n            }\n            var b64encoded = window.btoa(String.fromCharCode.apply(null, bytes));\n            return b64encoded;\n        };\n        return Util;\n    }());\n    exports.Util = Util;\n});\n\n},{}],18:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Logger = (function () {\n        function Logger() {\n        }\n        Object.defineProperty(Logger, \"activeLogLevel\", {\n            get: function () {\n                return Logger.instance.activeLogLevel;\n            },\n            set: function (value) {\n                Logger.instance.activeLogLevel = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Logger, \"instance\", {\n            get: function () {\n                if (typeof Logger._instance === \"undefined\" || Logger._instance === null) {\n                    Logger._instance = new LoggerImpl();\n                }\n                return Logger._instance;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Logger.subscribe = function () {\n            var listeners = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                listeners[_i - 0] = arguments[_i];\n            }\n            for (var i = 0; i < listeners.length; i++) {\n                Logger.instance.subscribe(listeners[i]);\n            }\n        };\n        Logger.clearSubscribers = function () {\n            return Logger.instance.clearSubscribers();\n        };\n        Object.defineProperty(Logger, \"count\", {\n            get: function () {\n                return Logger.instance.count;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Logger.write = function (message, level) {\n            if (level === void 0) { level = Logger.LogLevel.Verbose; }\n            Logger.instance.log({ level: level, message: message });\n        };\n        Logger.log = function (entry) {\n            Logger.instance.log(entry);\n        };\n        Logger.measure = function (name, f) {\n            return Logger.instance.measure(name, f);\n        };\n        return Logger;\n    }());\n    exports.Logger = Logger;\n    var LoggerImpl = (function () {\n        function LoggerImpl(activeLogLevel, subscribers) {\n            if (activeLogLevel === void 0) { activeLogLevel = Logger.LogLevel.Warning; }\n            if (subscribers === void 0) { subscribers = []; }\n            this.activeLogLevel = activeLogLevel;\n            this.subscribers = subscribers;\n        }\n        LoggerImpl.prototype.subscribe = function (listener) {\n            this.subscribers.push(listener);\n        };\n        LoggerImpl.prototype.clearSubscribers = function () {\n            var s = this.subscribers.slice(0);\n            this.subscribers.length = 0;\n            return s;\n        };\n        Object.defineProperty(LoggerImpl.prototype, \"count\", {\n            get: function () {\n                return this.subscribers.length;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        LoggerImpl.prototype.write = function (message, level) {\n            if (level === void 0) { level = Logger.LogLevel.Verbose; }\n            this.log({ level: level, message: message });\n        };\n        LoggerImpl.prototype.log = function (entry) {\n            if (typeof entry === \"undefined\" || entry.level < this.activeLogLevel) {\n                return;\n            }\n            for (var i = 0; i < this.subscribers.length; i++) {\n                this.subscribers[i].log(entry);\n            }\n        };\n        LoggerImpl.prototype.measure = function (name, f) {\n            console.profile(name);\n            try {\n                return f();\n            }\n            finally {\n                console.profileEnd();\n            }\n        };\n        return LoggerImpl;\n    }());\n    var Logger;\n    (function (Logger) {\n        (function (LogLevel) {\n            LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\n            LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n            LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\n            LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n            LogLevel[LogLevel[\"Off\"] = 99] = \"Off\";\n        })(Logger.LogLevel || (Logger.LogLevel = {}));\n        var LogLevel = Logger.LogLevel;\n        var ConsoleListener = (function () {\n            function ConsoleListener() {\n            }\n            ConsoleListener.prototype.log = function (entry) {\n                var msg = this.format(entry);\n                switch (entry.level) {\n                    case LogLevel.Verbose:\n                    case LogLevel.Info:\n                        console.log(msg);\n                        break;\n                    case LogLevel.Warning:\n                        console.warn(msg);\n                        break;\n                    case LogLevel.Error:\n                        console.error(msg);\n                        break;\n                }\n            };\n            ConsoleListener.prototype.format = function (entry) {\n                return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n            };\n            return ConsoleListener;\n        }());\n        Logger.ConsoleListener = ConsoleListener;\n        var AzureInsightsListener = (function () {\n            function AzureInsightsListener(azureInsightsInstrumentationKey) {\n                this.azureInsightsInstrumentationKey = azureInsightsInstrumentationKey;\n                var appInsights = window[\"appInsights\"] || function (config) {\n                    function r(config) {\n                        t[config] = function () {\n                            var i = arguments;\n                            t.queue.push(function () { t[config].apply(t, i); });\n                        };\n                    }\n                    var t = { config: config }, u = document, e = window, o = \"script\", s = u.createElement(o), i, f;\n                    for (s.src = config.url || \"//az416426.vo.msecnd.net/scripts/a/ai.0.js\", u.getElementsByTagName(o)[0].parentNode.appendChild(s), t.cookie = u.cookie, t.queue = [], i = [\"Event\", \"Exception\", \"Metric\", \"PageView\", \"Trace\"]; i.length;) {\n                        r(\"track\" + i.pop());\n                    }\n                    return r(\"setAuthenticatedUserContext\"), r(\"clearAuthenticatedUserContext\"), config.disableExceptionTracking || (i = \"onerror\", r(\"_\" + i), f = e[i], e[i] = function (config, r, u, e, o) {\n                        var s = f && f(config, r, u, e, o);\n                        return s !== !0 && t[\"_\" + i](config, r, u, e, o), s;\n                    }), t;\n                }({\n                    instrumentationKey: this.azureInsightsInstrumentationKey\n                });\n                window[\"appInsights\"] = appInsights;\n            }\n            AzureInsightsListener.prototype.log = function (entry) {\n                var ai = window[\"appInsights\"];\n                var msg = this.format(entry);\n                if (entry.level === LogLevel.Error) {\n                    ai.trackException(msg);\n                }\n                else {\n                    ai.trackEvent(msg);\n                }\n            };\n            AzureInsightsListener.prototype.format = function (entry) {\n                return \"Message: \" + entry.message + \". Data: \" + JSON.stringify(entry.data);\n            };\n            return AzureInsightsListener;\n        }());\n        Logger.AzureInsightsListener = AzureInsightsListener;\n        var FunctionListener = (function () {\n            function FunctionListener(method) {\n                this.method = method;\n            }\n            FunctionListener.prototype.log = function (entry) {\n                this.method(entry);\n            };\n            return FunctionListener;\n        }());\n        Logger.FunctionListener = FunctionListener;\n    })(Logger = exports.Logger || (exports.Logger = {}));\n});\n\n},{}],19:[function(require,module,exports){\n(function (factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        var v = factory(require, exports); if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === 'function' && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    \"use strict\";\n    var Util = (function () {\n        function Util() {\n        }\n        Util.getCtxCallback = function (context, method) {\n            var params = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                params[_i - 2] = arguments[_i];\n            }\n            return function () {\n                method.apply(context, params);\n            };\n        };\n        Util.urlParamExists = function (name) {\n            name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n            var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n            return regex.test(location.search);\n        };\n        Util.getUrlParamByName = function (name) {\n            name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n            var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\n            var results = regex.exec(location.search);\n            return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n        };\n        Util.getUrlParamBoolByName = function (name) {\n            var p = this.getUrlParamByName(name);\n            var isFalse = (p === \"\" || /false|0/i.test(p));\n            return !isFalse;\n        };\n        Util.stringInsert = function (target, index, s) {\n            if (index > 0) {\n                return target.substring(0, index) + s + target.substring(index, target.length);\n            }\n            return s + target;\n        };\n        Util.dateAdd = function (date, interval, units) {\n            var ret = new Date(date.toLocaleString());\n            switch (interval.toLowerCase()) {\n                case \"year\":\n                    ret.setFullYear(ret.getFullYear() + units);\n                    break;\n                case \"quarter\":\n                    ret.setMonth(ret.getMonth() + 3 * units);\n                    break;\n                case \"month\":\n                    ret.setMonth(ret.getMonth() + units);\n                    break;\n                case \"week\":\n                    ret.setDate(ret.getDate() + 7 * units);\n                    break;\n                case \"day\":\n                    ret.setDate(ret.getDate() + units);\n                    break;\n                case \"hour\":\n                    ret.setTime(ret.getTime() + units * 3600000);\n                    break;\n                case \"minute\":\n                    ret.setTime(ret.getTime() + units * 60000);\n                    break;\n                case \"second\":\n                    ret.setTime(ret.getTime() + units * 1000);\n                    break;\n                default:\n                    ret = undefined;\n                    break;\n            }\n            return ret;\n        };\n        Util.loadStylesheet = function (path, avoidCache) {\n            if (avoidCache) {\n                path += \"?\" + encodeURIComponent((new Date()).getTime().toString());\n            }\n            var head = document.getElementsByTagName(\"head\");\n            if (head.length > 1) {\n                var e = document.createElement(\"link\");\n                head[0].appendChild(e);\n                e.setAttribute(\"type\", \"text/css\");\n                e.setAttribute(\"rel\", \"stylesheet\");\n                e.setAttribute(\"href\", path);\n            }\n        };\n        Util.combinePaths = function () {\n            var paths = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                paths[_i - 0] = arguments[_i];\n            }\n            var parts = [];\n            for (var i = 0; i < paths.length; i++) {\n                if (typeof paths[i] !== \"undefined\" && paths[i] !== null) {\n                    parts.push(paths[i].replace(/^[\\\\|\\/]/, \"\").replace(/[\\\\|\\/]$/, \"\"));\n                }\n            }\n            return parts.join(\"/\").replace(/\\\\/, \"/\");\n        };\n        Util.getRandomString = function (chars) {\n            var text = \"\";\n            var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n            for (var i = 0; i < chars; i++) {\n                text += possible.charAt(Math.floor(Math.random() * possible.length));\n            }\n            return text;\n        };\n        Util.getGUID = function () {\n            var d = new Date().getTime();\n            var guid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n                var r = (d + Math.random() * 16) % 16 | 0;\n                d = Math.floor(d / 16);\n                return (c === \"x\" ? r : (r & 0x3 | 0x8)).toString(16);\n            });\n            return guid;\n        };\n        Util.isFunction = function (candidateFunction) {\n            return typeof candidateFunction === \"function\";\n        };\n        Util.isArray = function (array) {\n            if (Array.isArray) {\n                return Array.isArray(array);\n            }\n            return array && typeof array.length === \"number\" && array.constructor === Array;\n        };\n        Util.stringIsNullOrEmpty = function (s) {\n            return typeof s === \"undefined\" || s === null || s === \"\";\n        };\n        Util.extend = function (target, source, noOverwrite) {\n            if (noOverwrite === void 0) { noOverwrite = false; }\n            var result = {};\n            for (var id in target) {\n                result[id] = target[id];\n            }\n            var check = noOverwrite ? function (o, i) { return !o.hasOwnProperty(i); } : function (o, i) { return true; };\n            for (var id in source) {\n                if (check(result, id)) {\n                    result[id] = source[id];\n                }\n            }\n            return result;\n        };\n        Util.applyMixins = function (derivedCtor) {\n            var baseCtors = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                baseCtors[_i - 1] = arguments[_i];\n            }\n            baseCtors.forEach(function (baseCtor) {\n                Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {\n                    derivedCtor.prototype[name] = baseCtor.prototype[name];\n                });\n            });\n        };\n        Util.isUrlAbsolute = function (url) {\n            return /^https?:\\/\\/|^\\/\\//i.test(url);\n        };\n        return Util;\n    }());\n    exports.Util = Util;\n});\n\n},{}]},{},[16])(16)\n});"],"sourceRoot":"/source/"}